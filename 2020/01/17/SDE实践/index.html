<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="google-site-verification" content="HXu59hqpozjMzWqFIp85wO31_osshLx4K2kU9vB0GaA">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="List ListNode 123456789101112class ListNode &amp;#123;    public int value;  // any type    public ListNode next;    // public ListNode prev;    public ListNode(int value) &amp;#123;        this.value = value">
<meta property="og:type" content="article">
<meta property="og:title" content="SDE实践">
<meta property="og:url" content="http://hackcraker.github.io/2020/01/17/SDE实践/index.html">
<meta property="og:site_name" content="源泉">
<meta property="og:description" content="List ListNode 123456789101112class ListNode &amp;#123;    public int value;  // any type    public ListNode next;    // public ListNode prev;    public ListNode(int value) &amp;#123;        this.value = value">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200118131650193.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200119125154342.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200119190001164.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200119190313790.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200119191230171.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200121202717092.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200121202754707.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122143516838.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122143731581.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122144437341.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122144847244.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122144914975.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122150620960.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122185120370.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122190629893.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122195648939.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122210638563.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122213750584.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122213854361.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200122213935139.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123111451639.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123111633573.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123201938717.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123202142846.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123204430689.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123205810909.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123210455528.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123213157747.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123215943796.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200123220002722.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200125192204047.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200125195818722.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200125200213475.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200126142048373.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200127142607895.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200127142646637.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200127203814010.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200127223229974.png">
<meta property="og:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200127223546788.png">
<meta property="og:updated_time" content="2020-01-29T06:07:13.733Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SDE实践">
<meta name="twitter:description" content="List ListNode 123456789101112class ListNode &amp;#123;    public int value;  // any type    public ListNode next;    // public ListNode prev;    public ListNode(int value) &amp;#123;        this.value = value">
<meta name="twitter:image" content="http://hackcraker.github.io/2020/01/17/SDE实践/image-20200118131650193.png">






  <link rel="canonical" href="http://hackcraker.github.io/2020/01/17/SDE实践/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>SDE实践 | 源泉</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">源泉</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">You can't leave this world to the people you despise.</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://hackcraker.github.io/2020/01/17/SDE实践/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucas Chan">
      <meta itemprop="description" content="满地都是六便士,他却抬头看到了月亮。">
      <meta itemprop="image" content="/images/morty.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="源泉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">SDE实践

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-01-17 23:23:10" itemprop="dateCreated datePublished" datetime="2020-01-17T23:23:10+08:00">2020-01-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-01-29 14:07:13" itemprop="dateModified" datetime="2020-01-29T14:07:13+08:00">2020-01-29</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/01/17/SDE实践/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/01/17/SDE实践/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">107k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1:37</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="list">List</h2>
<p><strong>ListNode</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> value;  <span class="comment">// any type</span></span><br><span class="line">    <span class="keyword">public</span> ListNode next;</span><br><span class="line">    <span class="comment">// public ListNode prev;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ListNode</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.next = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ListNode head = <span class="keyword">new</span> ListNode(<span class="number">3</span>);</span><br><span class="line">head.next</span><br></pre></td></tr></table></figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200118131650193.png" alt="image-20200118131650193"><figcaption>image-20200118131650193</figcaption>
</figure>
<p>temp.next = temp.next.next // is okay what if: current.next = current.next.next // NullPointerException</p>
<p><strong>Examples of Linked List Operations:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// length()  1 -&gt; 2 -&gt; 3 -&gt; null</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">length</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">        length++;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// head == null</span></span><br><span class="line">    <span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* get(index)</span></span><br><span class="line"><span class="comment">* 1 -&gt; 2 -&gt; 3 -&gt; null</span></span><br><span class="line"><span class="comment">* index = 0 -&gt; return 1</span></span><br><span class="line"><span class="comment">* index = 4 -&gt; return null</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">ListNode <span class="title">get</span><span class="params">(ListNode head, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (index &gt; <span class="number">0</span> &amp;&amp; head != <span class="keyword">null</span>) &#123;</span><br><span class="line">        head = head.next;</span><br><span class="line">        index--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// index &lt;= 0 || head == null</span></span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// appendHead()</span></span><br><span class="line"><span class="function">ListNode <span class="title">appendHead</span><span class="params">(ListNode head, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    ListNode newHead = <span class="keyword">new</span> ListNode(value);</span><br><span class="line">    newHead.next = head;</span><br><span class="line">    <span class="keyword">return</span> newHead;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//appendTail()</span></span><br><span class="line"><span class="function">ListNode <span class="title">appendTAil</span><span class="params">(ListNode head, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1. head == null</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ListNode(value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. head != null, find the last node in the list.</span></span><br><span class="line">    ListNode prev = head;</span><br><span class="line">    <span class="keyword">while</span> (prev.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        prev = prev.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// exit the while loop when prev.next == null</span></span><br><span class="line">    prev.next = <span class="keyword">new</span> ListNode(value);</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>head could be changed - we need to return the new head if changed usually need to consider</p>
<ul>
<li>head == null</li>
<li>head.next = null</li>
</ul>
<p>while loop - we need to understand what is the terminate condition</p>
</blockquote>
<p><strong>List Interface</strong></p>
<ul>
<li><p>An ordered collection (sometimes called a sequence).</p></li>
<li><p>Lists can contain duplicate elements.</p></li>
</ul>
<p>The user of a List generally has precise control over where in the list each element is inserted and can access elements by their index.</p>
<p>Provided functionalities(interfaces)</p>
<ul>
<li>Random Access: set(int index, E e) get(int index) add(int index, E e), add(E e) remove(int index)</li>
<li>Search</li>
<li>Iterator</li>
<li>Range-View</li>
<li>Other useful methods: isEmpty(); size();</li>
</ul>
<p>Most popular implementation class: <strong>ArrayList, LinkedList.</strong></p>
<p><strong>Abstract class, interface</strong></p>
<p>Both can have methods declared without implementation (abstract methods).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Dictionary</span> </span>&#123;</span><br><span class="line">	<span class="comment">// index out of bound, it will return null.</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dictionary myDict = <span class="keyword">new</span> Dictionary(); <span class="comment">// Wrong!</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dictionarylmpl</span> <span class="keyword">implements</span> <span class="title">Dictionary</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//abstract class/Interface: you cannot instantiate an object by abstract class or interface</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(Dictionary dict, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dict.get(target);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">implements</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printf</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Declare into a general type, initialize into a concrete type (Interfaces are also types):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Node&gt; myList = <span class="keyword">new</span> LinkedList&lt;Node&gt;();</span><br><span class="line">myList.get(<span class="number">5</span>);  <span class="comment">// fine</span></span><br><span class="line">myList.set(<span class="number">5</span>,<span class="number">7</span>);<span class="comment">// fine</span></span><br><span class="line">myList.poll();  <span class="comment">// not fine</span></span><br></pre></td></tr></table></figure>
<p>Preserve the general semantic of a List</p>
<ul>
<li>Can only use methods in a List interface</li>
<li>Not to make any assumptions on implementation</li>
<li>Make sure interchangeable in future</li>
</ul>
<p>Provide concrete implementation by using LinkedList</p>
<ul>
<li>Choose the best implementation for the current use case</li>
</ul>
<p>list: size() is O(1) time complexity because of eager computation</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">isEmpty() &#123;</span><br><span class="line">	<span class="keyword">return</span> (size == <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>节省代码量，同时使逻辑更清晰。</p>
<p><strong>Comparison</strong></p>
<table>
<thead>
<tr class="header">
<th>Operation</th>
<th>ArrayList</th>
<th>LinkedList</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>get(int index) at head/tail</td>
<td>O(1)</td>
<td>O(1) - maintain both head and tail</td>
</tr>
<tr class="even">
<td>get(int index) in middle</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>set(int index) at head/tail</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>set(int index) in middle</td>
<td>O(1)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>add(int index, E e) in middle</td>
<td>O(n)</td>
<td>O(n)</td>
</tr>
<tr class="even">
<td>add(int index, E e) at head</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>add(E e) at tail</td>
<td>amortized: O(1)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>remove(int index) at head</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr class="odd">
<td>remove(int index) at tail</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>remove(int index) at middle</td>
<td>O(n)</td>
<td>O(n)</td>
</tr>
<tr class="odd">
<td>size()</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
<tr class="even">
<td>isEmpty()</td>
<td>O(1)</td>
<td>O(1)</td>
</tr>
</tbody>
</table>
<p><strong>When to choose what? ArrayList or LinkedList?</strong></p>
<ol type="1">
<li><p>If you have a lot of random access operations, use ArrayList.</p></li>
<li><p>If you always add/remove at the end, use ArrayList</p>
<ul>
<li>When the time complexity is similar for using ArrayList and LinkedList, use ArrayList. (ArrayList use memory more efficiently - For each element LinkedList need to create different ListNode in memory, there is extra cost of storing the &quot;next&quot;, &quot;prev&quot; reference, and the allocation is not contiguous).</li>
</ul></li>
<li>Stack and Vector class are not recommended, whenever you need a Vector, use ArrayList, whenever you need a Stack, use LinkedLIst.
<ul>
<li>E.g. reason: http://stackoverflow.com/questions/25922201/linkedlist-vs-stack</li>
</ul></li>
</ol>
<figure>
<img src="/2020/01/17/SDE实践/image-20200119125154342.png" alt="image-20200119125154342"><figcaption>image-20200119125154342</figcaption>
</figure>
<h2 id="arraylist">ArrayList</h2>
<p>ArrayList is regarded as a resizable array.</p>
<ul>
<li>maintain an array with potential unused cells</li>
<li>will expand the array if there is no unused cells available
<ul>
<li>by replacing the maintained array with a new larger array (1.5 times larger by default)</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> E[] array;  <span class="comment">// the maintained array, the current maximum capacity is array.length</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;  <span class="comment">// the number of actually used cells in the maintained array</span></span><br><span class="line">    <span class="comment">// But, you don't have direct access to these internal implementation details.</span></span><br><span class="line">    ……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>get(int index): array[index]</p>
<p>set(int index, E e): array[index] = e</p>
<p>size(): // size means the number of used cells, not the capacity.</p>
<p>when call add(), remove(), size is modified as well</p>
<p><strong>call add(11):</strong> array = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}, size = 10, capacity = 10 (array.length). call add(11):</p>
<ol type="1">
<li>check if it is full (size = capacity)</li>
<li>if it is full, create a new array1, array1's size= 1.5 * array's size, copy all the element in array to array1, and change the maintained array to array1. array1 = new Integer[size * 1.5] array1 = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, null, null, null, null, null} size = 10, capacity= 15 array = array1</li>
<li>set the 11th element's value to 11, size++. array = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, null, null, null, null} size= 11, capacity= 15</li>
</ol>
<p><strong>call add(int index, E e):</strong></p>
<ol type="1">
<li><p>expand if necessary</p></li>
<li><p>then right move all the elements after index by 1,</p></li>
<li><p>set the element at index.</p></li>
</ol>
<p>Example: array= {1, 3, 4, 5, 6, null, null, null, null, null}, size = 5, capacity = 10 call add(1, 2) - add Integer 2 at index 1</p>
<ol type="1">
<li><p>do not need to expand since size &lt; capacity</p></li>
<li><p>move all the elements of {3, 4, 5, 6} right by 1 position, size++ array= {1, 2, 3, 4, 5, 6, null, null, null, null}, size = 6, capacity = 10</p></li>
<li><p>set index 1 as Integer 2 array = {1, 2, 3, 4, 5, 6, null, null, null, null}</p></li>
</ol>
<p><strong>call remove(1):</strong> remove the element at index 1</p>
<ol type="1">
<li><p>check if index out of bound first.</p></li>
<li><p>move all the elements of {3, 4, 5, 6} left by 1 position, size--</p></li>
</ol>
<h2 id="linkedlist">LinkedList</h2>
<p>backend by a doubly linked list, wrap the size, head and tail information.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    E e;</span><br><span class="line">    <span class="keyword">private</span> ListNode&lt;E&gt; prev;</span><br><span class="line">    <span class="keyword">private</span> ListNode&lt;E&gt; next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ListNode&lt;E&gt; head;</span><br><span class="line">    <span class="keyword">private</span> ListNode&lt;E&gt; tail;</span><br><span class="line">    <span class="keyword">private</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// traverse from head and find the node at index.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>get(int index) - from the head/tail, traverse the list to get the element at index</p>
<p>set(int index, E e) - from the head/tail, traverse the list to the get the element at index, and change it</p>
<p>add(int index, E e), add(E e)</p>
<ul>
<li>at tail - append new node after tail and update tail to the new added node</li>
<li>at head - insert in front of the head, and update head to the new added node</li>
<li>at middle</li>
</ul>
<p>remove(int index)</p>
<ul>
<li>at head - update the head to head.next</li>
<li>at tail - update the tail to tail.prev</li>
<li>at middle · from head/tail, traverse the list to get the element at index, and remove it.</li>
</ul>
<p>size() - O(1) - eager computation.</p>
<p>isEmpty()</p>
<p><strong>Something about coding</strong></p>
<p><strong>null &amp; empty collections, array</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[O];  <span class="comment">// can contain 0 element. is okay!</span></span><br><span class="line"></span><br><span class="line">ArrayList&lt;lnteger&gt; list = <span class="keyword">null</span>;</span><br><span class="line">ArrayList&lt;lnteger&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br></pre></td></tr></table></figure>
<p>They are DIFFERENT!</p>
<p>null - there is no array object associated with the reference empty array/list - there is an array/list object, but the array/list object does not contain any element, yet (length/size == 0).</p>
<p>Example</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 </span></span><br><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (list.isEmpty()) &#123; <span class="comment">// NullPointerException</span></span><br><span class="line">    System.out.println(list.size());</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line">                       </span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line"><span class="keyword">if</span> (list.isEmpty()) &#123;</span><br><span class="line">	System.out.println(list.size());</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(list.get(<span class="number">0</span>)); <span class="comment">// ArraylndexOutOfBoundException</span></span><br><span class="line">                       </span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">null</span>;</span><br><span class="line">System.out.println(array[<span class="number">0</span>]); <span class="comment">// NullPointerException</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4</span></span><br><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">System.out.println(array[<span class="number">0</span>]); <span class="comment">// ArraylndexOutOfBoundException</span></span><br></pre></td></tr></table></figure>
<p><strong>Check corner cases &amp; boundary conditions</strong> <code>if (array.length == 0 || array == null)</code> X NullPointerException <code>if (array == null || array.length == 0)</code> Remember: always do null check before any ofher checks. The logic expressions are evaluated from left to right (short circuit)</p>
<p><strong>The things to keep in mind</strong></p>
<ul>
<li>Check null - check at very first place</li>
<li>Check length/size/head == null/head.next == null/other initial check conditions.</li>
<li>Check index out of bound/NullPointer (even inside the for/while loop)
<ul>
<li>keep in mind any index can not be out of range(&lt; 0 ll &gt;= array.length).</li>
<li>keep in mind some ListNode reference might be null.</li>
</ul></li>
<li>What is the termination condition of for/while loop Make some concrete examples to determine if the logic is correct.</li>
</ul>
<p><strong>About dummy node</strong> It is not a must, but can make your life much easier, there are several suitable conditions using dummy will be very handy.</p>
<ul>
<li>the head could be changed when solving the problem</li>
</ul>
<p>Example - insert a value into a sorted list 1-&gt; 3 -&gt; 5</p>
<p>insert 4</p>
<p>dummy -&gt; 0 -&gt; 1 -&gt; 3 -&gt; 5. prev while (prev.next != null &amp;&amp; prev.next.val &lt; val){ prev = prev.next; }</p>
<p>1). With dummy node's help</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">insert</span><span class="params">(ListNode head, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    ListNode dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    dummy.next = head;</span><br><span class="line">    ListNode newNode = <span class="keyword">new</span> ListNode(val);</span><br><span class="line">    ListNode curr = dummy.next, prev = dummy;</span><br><span class="line">    <span class="keyword">while</span> (curr != <span class="keyword">null</span> &amp;&amp; curr.val &lt; val) &#123;</span><br><span class="line">        prev = curr;</span><br><span class="line">        curr = curr.next;</span><br><span class="line">    &#125;</span><br><span class="line">    prev.next = newNode;</span><br><span class="line">    newNode.next = curr;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). Without dummy node's help</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">insert</span><span class="params">(ListNode head, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    ListNode newNode = <span class="keyword">new</span> ListNode(val);</span><br><span class="line">    <span class="comment">// check head.</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || val &lt;= head.val) &#123;</span><br><span class="line">        newNode.next = head;</span><br><span class="line">        <span class="keyword">return</span> newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// the inserted node is not the new head.</span></span><br><span class="line">    ListNode cur = head;</span><br><span class="line">    <span class="comment">// find first node &gt;= val     cur, cur.next</span></span><br><span class="line">    <span class="keyword">while</span> (cur.next != <span class="keyword">null</span> &amp;&amp; cur.next.val &lt; val) &#123;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// cur.next == null || cur.next.val &gt;= val</span></span><br><span class="line">    newNode.next = cur.next;</span><br><span class="line">    cur.next = newNode;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>not sure yet which node will be head when constructing the list</li>
</ul>
<p>3 -&gt; 5</p>
<p>4 -&gt; 6</p>
<p>dummy -&gt; 1 -&gt; 2 -&gt; ……</p>
<p>Example - merge two sorted list</p>
<p>1). With dummy node's help</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">merge</span><span class="params">(ListNode h1, ListNode h2)</span> </span>&#123;</span><br><span class="line">    ListNode dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    ListNode curr = dummy;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (h1 != <span class="keyword">null</span> &amp;&amp; h2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (h1.value &lt;= h2.value) &#123;</span><br><span class="line">            curr.next = h1;</span><br><span class="line">            h1 = h1.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            curr.next = h2;</span><br><span class="line">            h2 = h2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        curr = curr.next;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (h1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        curr.next = h1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (h2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        curr.next = h2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). Without dummy node's help</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">merge</span><span class="params">(ListNode h1, ListNode h2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (h1 == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> h2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (h2 == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> h1;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode head = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (h1.val &lt;= h2.val) &#123;</span><br><span class="line">        head = h1;</span><br><span class="line">        h1 = h1.next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        head = h2;</span><br><span class="line">        h2 = h2.next;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode curr = head;</span><br><span class="line">    <span class="keyword">while</span> (h1 != <span class="keyword">null</span> &amp;&amp; h2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (h1.value &lt;= h2.value) &#123;</span><br><span class="line">            curr.next = h1;</span><br><span class="line">            h1 = h1.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            curr.next = h2;</span><br><span class="line">            h2 = h2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        curr = curr.next;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (h1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        curr.next = h1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (h2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        curr.next = h2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Tips: 尽量不使用global variable</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200119190001164.png" alt="image-20200119190001164"><figcaption>image-20200119190001164</figcaption>
</figure>
<h2 id="queue-stack-deque">Queue &amp; Stack &amp; Deque</h2>
<p><strong>In Java</strong> In Java, we usually refer it to Queue and Deque interface. A collection to hold multiple elements prior to processing. Contains a buffer and specifies a mechanism to choose which is the next element to process.</p>
<ul>
<li><p>Queue - FIFO (exception: PriorityQueue) http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html</p>
<ul>
<li><p>offer() - offer at the tail</p></li>
<li><p>poll()- poll at the head</p></li>
<li><p>peek() - look at the head without polling it out</p></li>
</ul></li>
<li>Deque - FIFO &amp; LIFO (both queue and stack) http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html
<ul>
<li>provide both offer at head/tail, poll at head/tail, and peek at head/tail</li>
<li>so it can be used as a queue, or a stack.</li>
</ul></li>
</ul>
<p>Common APIs</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200119190313790.png" alt="image-20200119190313790"><figcaption>image-20200119190313790</figcaption>
</figure>
<ol type="1">
<li>Use the same set of APIs</li>
<li>What's the point: <a href="https://blog.csdn.net/u012050154/article/details/60572567" target="_blank" rel="noopener">java Queue中 add/offer，element/peek，remove/poll区别</a></li>
</ol>
<figure>
<img src="/2020/01/17/SDE实践/image-20200119191230171.png" alt="image-20200119191230171"><figcaption>image-20200119191230171</figcaption>
</figure>
<p>Other useful methods:</p>
<ul>
<li>isEmpty();</li>
<li>size();</li>
</ul>
<p>All the operations' cost is O(1). Most popular implementation class: <strong>LinkedList, ArrayDeque</strong>(Java 6 onwards).</p>
<p>When you need a queue or stack, you can just use <strong>LinkedList</strong>, as it implements both Queue and Deque interfaces. (Do not use Stack class. )</p>
<p>ArrayDeque: no null values in deque.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Deque;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// head(first) -&gt; &#123;1, 2, 3&#125; &lt;- tail(last)</span></span><br><span class="line">        Queue&lt;Integer&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.offer(<span class="number">1</span>);</span><br><span class="line">        queue.offer(<span class="number">2</span>);</span><br><span class="line">        queue.offer(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            System.out.println(queue.peek());</span><br><span class="line">            System.out.println(queue.poll());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(queue.peek());</span><br><span class="line">        System.out.println(queue.poll());</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * If you are using deque as stack, you can choose the group of methods:</span></span><br><span class="line"><span class="comment">         * offerFirst() - push()</span></span><br><span class="line"><span class="comment">         * pollFirst() - pop()</span></span><br><span class="line"><span class="comment">         * peekFirst() - peek()</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// head(first) -&gt; &#123;3, 2, 1&#125; &lt;- tail(last)</span></span><br><span class="line">        Deque&lt;Integer&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        stack.offerFirst(<span class="number">1</span>);</span><br><span class="line">        stack.offerFirst(<span class="number">2</span>);</span><br><span class="line">        stack.offerFirst(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            System.out.println(stack.peekFirst());</span><br><span class="line">            System.out.println(stack.pollFirst());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(stack.peekFirst());</span><br><span class="line">        System.out.println(stack.pollFirst());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// head(first) -&gt; &#123;3, 2, 1, 4, 5, 6&#125; &lt;- tail(last)</span></span><br><span class="line">        <span class="comment">// 3, 6, 2, 5, 1, 4, null, null, null, null</span></span><br><span class="line">        Deque&lt;Integer&gt; deque = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        deque.offerFirst(<span class="number">1</span>);</span><br><span class="line">        deque.offerFirst(<span class="number">2</span>);</span><br><span class="line">        deque.offerFirst(<span class="number">3</span>);</span><br><span class="line">        deque.offerLast(<span class="number">4</span>);</span><br><span class="line">        deque.offerLast(<span class="number">5</span>);</span><br><span class="line">        deque.offerLast(<span class="number">6</span>);</span><br><span class="line">        <span class="keyword">int</span> size = deque.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(deque.peekFirst());</span><br><span class="line">                System.out.println(deque.pollFirst());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(deque.peekLast());</span><br><span class="line">                System.out.println(deque.pollLast());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(deque.peekFirst());</span><br><span class="line">        System.out.println(deque.pollFirst());</span><br><span class="line">        System.out.println(deque.peekLast());</span><br><span class="line">        System.out.println(deque.pollLast());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Our Own Implementation</strong> Stack, Queue and Deque are not premier data structures, their implementation depend on other data structures - what could be the candidates? - <strong>sequence type(线性的)</strong></p>
<p>In general, two ways:</p>
<ul>
<li><p>use array</p></li>
<li><p>use Linked list</p></li>
</ul>
<p>Let's see how to use Linked List to do so. Usually, when we use Linked List, we might want to determine</p>
<ul>
<li>singly linked list?</li>
<li>doubly linked list?</li>
</ul>
<p><strong>Stack implemented by Linked List</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    ListNode next;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ListNode</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Stack</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ListNode head;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Stack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        head = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Integer value)</span> </span>&#123;</span><br><span class="line">        ListNode newNode = <span class="keyword">new</span> ListNode(value);</span><br><span class="line">        newNode.next = head;</span><br><span class="line">        head = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode temp = head;</span><br><span class="line">        head = head.next;</span><br><span class="line">        temp.next = <span class="keyword">null</span>;  <span class="comment">// 好习惯，可省略</span></span><br><span class="line">        <span class="keyword">return</span> temp.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Queue implemented by Linked List</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</span><br><span class="line">    ListNode head;</span><br><span class="line">    ListNode tail;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Queue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        head = tail = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">offer</span><span class="params">(Integer ele)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">            head = <span class="keyword">new</span> ListNode(ele);</span><br><span class="line">            tail = head;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tail.next = <span class="keyword">new</span> ListNode(ele);</span><br><span class="line">            tail = tail.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode node = head;</span><br><span class="line">        head = head.next;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">            tail = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node.next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Queue implemented by array</strong></p>
<p>Let's make a simpler case first, assume the capacity of the queue is bounded.</p>
<p>First, we need to maintain the position of head and tail - use two pointers.</p>
<p>offer = put one element, tail++ (tail points to the next available position) poll = grab element at head, head++ (head points to the next element in queue)</p>
<p>What is the problem here? what if tail == array.length - 1 and we need to do tail++?</p>
<p><strong>Circular Array</strong> - we can connect the start and end of the array, so that it is a cycle. index of array.length &lt;=&gt; index of 0</p>
<p>Quick tip: head = head + 1 == array.length ? 0 : head + 1; // (head + 1) % array.length;</p>
<p>Second, we need to know when empty, when full. head == tail -&gt; empty head == tail -&gt; full two solutions:</p>
<ol type="1">
<li>record size, size = 0 (empty), size == array.length (full)</li>
<li>head + 1 == tail -&gt; empty, head == tail -&gt; full, capacity =array.length- 1(next of head points to the head of the queue)</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoundedQueue</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> head;</span><br><span class="line">    <span class="keyword">int</span> tail;</span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    Integer[] array;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BoundedQueue</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">        array = <span class="keyword">new</span> Integer[cap];</span><br><span class="line">        head = tail = <span class="number">0</span>;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offer</span><span class="params">(Integer ele)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.</span></span><br><span class="line">        <span class="keyword">if</span> (size == array.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.</span></span><br><span class="line">        array[tail] = ele;</span><br><span class="line">        tail = tail + <span class="number">1</span> == array.length ? <span class="number">0</span> : tail + <span class="number">1</span>;</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Integer result = array[head];</span><br><span class="line">        head = head + <span class="number">1</span> == array.length ? <span class="number">0</span> : head + <span class="number">1</span>;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[head];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Stack implemented by array</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoundedStack</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] array;</span><br><span class="line">    <span class="keyword">int</span> head;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BoundedStack</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// check cap</span></span><br><span class="line">        array = <span class="keyword">new</span> <span class="keyword">int</span>[cap];</span><br><span class="line">        head = -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> ele)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == array.length - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        array[++head] = ele;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> head == -<span class="number">1</span> ?<span class="keyword">null</span> : array[head--];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">top</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> head == -<span class="number">1</span> ? <span class="keyword">null</span> : array[head];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Exercise</strong> We have done Queue and Stack, how about Deque?</p>
<ul>
<li>Use Linked List
<ul>
<li>can we still use singly linked list or we need doubly linked list?</li>
</ul></li>
<li>Use Circular Array</li>
</ul>
<h2 id="priorityqueue">PriorityQueue</h2>
<p>It is a heap with the same Queue interface with offer(), peek(), poll(). But, it is not FIFO, when poll() or peek() we always look at the smallest/largest element (min heap/max heap).</p>
<p>The PriorityQueue will arrange the elements based on the order of the elements (who is smaller/larger by comparing any two of them) and it is optimized for problems about &quot;who is the smallest/largest element'.</p>
<p>Internally it is implemented using an array.</p>
<ul>
<li>offer(E e) - insert one element into the heap</li>
<li>peek() - peek the top element in the heap (smallest/largest based on how to order the elements)</li>
<li>poll() - remove the top element from the heap, and return it (smallest/largest based on how to order the elements)</li>
<li>size()</li>
<li>isEmpty()</li>
</ul>
<p>time complexity:</p>
<ul>
<li>offer(E e) - O(log n)</li>
<li>peek() - O(1)</li>
<li>poll() - O(log n)</li>
<li>remove() - O(log n), from AbstractQueue, remove(Object) - O(n) 删除任意一个元素</li>
<li>size()- O(1)</li>
<li>isEmpty · O(1)</li>
</ul>
<p><strong>Order - The PriorityQueue need to know how to compare the elements and determine which one is smaller/larger.</strong></p>
<p>There are two ways to do so: <strong>The element type implementing Comparable interface</strong></p>
<p>Example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PriorityQueue&lt;Integer&gt; minHeap = <span class="keyword">new</span> PriorityQueue&lt;Integer&gt;();</span><br><span class="line">minHeap.offer(<span class="number">4</span>);</span><br><span class="line">minHeap.offer(<span class="number">5</span>);</span><br><span class="line">minHeap.offer(<span class="number">2</span>);</span><br><span class="line">minHeap.offer(<span class="number">3</span>);</span><br><span class="line">minHeap.offer(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span> (!minHeap.isEmpty()) &#123;</span><br><span class="line">    System.out. println(minHeap.poll());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>How does the priorityqueue know how to compare the Integer objects?</p>
<p>The element's class can implement Comparable interface and thus implement the required method compare To(), PriorityQueue will use this method to compare any two elements.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Comparable</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(E ele)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// part of the Integer class implementation</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Integer</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Interger</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Interger another)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.value == another.value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.value &lt; another.value ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The return value of compareTo(another) method determines the order of this and another: 0 - this and another are of the same priority -1 (&lt; 0) - this has higher priority than another 1 (&gt; 0) - this has less priority than another</p>
<p><strong>Another Example using custom class:</strong> Suppose you have an integer matrix, each row is sorted by ascending order and each column is also sorted by ascending order, we need a class to representing each cell in the matrix, and we need to compare two cells with their value in the matrix.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cell</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Cell</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> row;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> col;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Cell</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.row = row;</span><br><span class="line">        <span class="keyword">this</span>.col = col;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Cell another)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.value == another.value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.value &lt; another.value ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// We want to have a minHeap by the value of the Cell elements.</span></span><br><span class="line">PriorityQueue&lt;Cell&gt; minHeap = <span class="keyword">new</span> PriorityQueue&lt;Cell&gt;();</span><br><span class="line">Cell c1 = <span class="keyword">new</span> Cell(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">Cell c2 = <span class="keyword">new</span> Cell(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">minHeap.offer(c1);</span><br><span class="line">minHeap.offer(c2);</span><br><span class="line"><span class="keyword">int</span> result = c1.comparedTo(c2);</span><br><span class="line">System.out.println(result);</span><br></pre></td></tr></table></figure>
<p><strong>Provide an extra Comparator object to compare the elements</strong> There is another interface Comparator, it is used to compare two elements with same type E.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Comparator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(E o1, E o2)</span></span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cell</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> row;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> col;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Cell</span><span class="params">(<span class="keyword">int</span> row, <span class="keyword">int</span> col, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.row = row;</span><br><span class="line">        <span class="keyword">this</span>.col = col;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Cell</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Cell c1, Cell c2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (c1.value == c2.value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c1.value &lt; c2.value ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PriorityQueue&lt;Cell&gt; minHeap = <span class="keyword">new</span> PriorityQueue&lt;&gt;(<span class="number">11</span>, <span class="keyword">new</span> MyComparator());</span><br><span class="line">Cell c1 = <span class="keyword">new</span> Cell(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">Cell c2 = <span class="keyword">new</span> Cell(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">minHeap.offer(c1);</span><br><span class="line">minHeap.offer(c2);</span><br><span class="line">System.out.println(minHeap.size());</span><br><span class="line">System.out.println(minHeap.poll().value);</span><br><span class="line">System.out.println(minHeap.size());</span><br></pre></td></tr></table></figure>
<p>If class E already implements Comparable interface, and we need another way of ordering the elements in our PriorityQueue, we can pass the new Comparator.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// I want a max heap here...</span></span><br><span class="line"><span class="comment">// So I need to provide a new Comparator, the ordering defined by the Comparator is the reversed natural order provided by Integer class</span></span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; maxHeap =</span><br><span class="line">                <span class="keyword">new</span> PriorityQueue&lt;&gt;(<span class="number">16</span>, <span class="keyword">new</span> ReverseComparator());</span><br><span class="line">        maxHeap.offer(<span class="number">4</span>);</span><br><span class="line">        maxHeap.offer(<span class="number">2</span>);</span><br><span class="line">        maxHeap.offer(<span class="number">5</span>);</span><br><span class="line">        maxHeap.offer(<span class="number">3</span>);</span><br><span class="line">        maxHeap.offer(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">while</span> (!maxHeap.isEmpty()) &#123;</span><br><span class="line">            System.out.println(maxHeap.poll());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReverseComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer i1, Integer i2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i1.equals(i2)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i1 &lt; i2 ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Or, there is a utility method <code>Collections.reverseOrder()</code>, it will return a comparator that reverses the natural order.</p>
<p>equals() method of a comparator: if the incoming comparator equals the current comparator, not about orders!</p>
<p><strong>Conclusion:</strong> To make PriorityQueue work, there are two ways:</p>
<ol type="1">
<li>The element class E implements Comparable interface</li>
<li>Provide a Comparator&lt; E &gt; class to compare elements. and pass an comparator object to the PriorityQueue.</li>
</ol>
<p>if E already implements Comparable&lt; E &gt;, but still you provide a Comparator, PriorityQueue will choose the order specified in Comparator.</p>
<p><strong>Most frequently used constructors of PriorityQueue</strong> 1. <code>PriorityQueue&lt;Cell&gt; heap = new PriorityQueue&lt;Cell&gt;();</code> initialize the internal array with default capacity(11) class Cell must implements <code>Comparable&lt;Cell&gt;</code> ! 2. <code>PriorityQueue&lt;Cell&gt; heap = new PriorityQueue&lt;Cell&gt;(16);</code> initialize the internal array with specified capacity(16) class Cell implements <code>Comparable&lt;Cell&gt;</code> ! 3. <code>PriorityQueue&lt;Cell&gt; heap = new PriorityQueue&lt;Cell&gt;(16, new MyComparator();</code> initialize the internal array with specified capacity(16) class MyComparator implements <code>Comparator&lt;Cell&gt;</code> !</p>
<p><strong>Be Careful the initial capacity has to be &gt; 0:</strong> // if k &lt;= 0, IllegalArgumentException will be thrown in the constructor. <code>PriorityQueue&lt;Cell&gt; minHeap = new PriorityQueue&lt;Cell&gt;(k, new MyComparator();</code></p>
<p><strong>Method 1 and 2, the object inside the PQ should be comparable!</strong> Otherwise, Java will throw runtime exception (it will cast anything inside into a Comparable to do the comparison).</p>
<p><strong>heapify() - convert an array to heap in O(n) time</strong> ArrayList<cell> list = new ArrayList<cell>(); PriorityQueue<cell> heap = new PriorityQueue<cell>(list);</cell></cell></cell></cell></p>
<ul>
<li><p>initialize the internal array with heapify() internally</p></li>
<li><p>class Cell implements Comparable<cell> !</cell></p></li>
</ul>
<p>it is not exposed to outside from PriorityQueue class, it is a private method. the only way to utilize the heapify() is to use the constructor</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Part of the PriorityQueue implementation……</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PriorityQueue</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> E[] heapArray;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PriorityQueue</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">        heapArray = c.toArray();</span><br><span class="line">        size = heapArray.length;</span><br><span class="line">        heapify(); <span class="comment">// the only place heapify is called.</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">heapify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// heapify the heapArray.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            percolateDown(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Nested class: define a class within a class. Static nested class vs. non-static nested class: belong to class, or belong to instance. Anonymous class: nested class with no name. Often replaceable by lambda expressions in Java8.</p>
<p><strong>Something about coding: nested classes</strong> Nested class: A class within another class. Why? (Official tutorial)</p>
<ul>
<li><strong>It is a way of logically grouping classes that are only used in one place</strong>: If a class is useful to only one other class, then it is logical to embed it in that class and keep the two together. Nesting such &quot;helper classes&quot; makes their package more streamlined.</li>
<li><strong>It increases encapsulation</strong>: Consider two top-level classes, A and B, where B needs access to members of A that would otherwise be declared private. By hiding class B within class A, A's members can be declared private and B can access them. In addition, B itself can be hidden from the outside world.</li>
<li><strong>It can lead to more readable and maintainable code</strong>: Nesting small classes within top-level classes places the code closer to where it is used.</li>
</ul>
<p>Static nested class: a nested class associated with the outside class. Can access class variables and methods. Inner class: a nested class associated with an instance of the class. Can access instance variables and methods. Anonymous inner class (defined in a method with just new and no definition)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PriorityQueue&lt;Cell&gt; pQueue = <span class="keyword">new</span> PriorityQueue&lt;&gt;(<span class="number">16</span>, <span class="keyword">new</span> Comparator&lt;Cell&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Cell o1, Cell o2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o1.value == o2.value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> o1.value &lt; o2.value ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="heap">Heap</h2>
<p>Implement PriorityQueue (Heap) <strong>Definition</strong></p>
<ul>
<li>Heap is a (binary) tree based data structure</li>
<li>Across the entire tree, the relation between a parent node and a child node stays consistent.
<ul>
<li>Example: <strong>min heap</strong>
<ol type="1">
<li>the parent node is always &lt;= its two child nodes (parent node is the smallest node in the subtree rooted at itself).</li>
<li>the relation between the two child nodes can differ.</li>
</ol></li>
</ul></li>
<li>The common implementation of a heap is using a complete binary tree. * A &quot;<strong>complete binary tree</strong>&quot; is a binary tree in which every level, except possibly the last level, is completely filled, and all nodes are as far left as possible.</li>
</ul>
<figure>
<img src="/2020/01/17/SDE实践/image-20200121202717092.png" alt="image-20200121202717092"><figcaption>image-20200121202717092</figcaption>
</figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200121202754707.png" alt="image-20200121202754707"><figcaption>image-20200121202754707</figcaption>
</figure>
<p><strong>Representation</strong></p>
<ul>
<li><p>it can also be represented as an array (by the level order traversal of the binary tree), since it is a complete binary tree.</p>
<ul>
<li>Why? - if it is a complete binary tree, the matching between the nodes and the index of the array is determined, and the relation of parent and child nodes can be well transferred to the relation between two indices.</li>
</ul></li>
<li><p>Example:</p>
<ul>
<li><p>index of parent = i, what is the index of the two child nodes?</p>
<ul>
<li><p>left child of index i = 2 * i + 1</p></li>
<li><p>right child of index i = 2 * i + 2</p></li>
<li><p>parent of index i = (i - 1) / 2</p></li>
</ul></li>
<li><p>the root of the tree is at index 0.</p></li>
</ul></li>
</ul>
<p><strong>Basic Heap Internal Operations</strong></p>
<p><strong>percolateUp()</strong></p>
<ul>
<li>when to use?
<ul>
<li>the element need to be moved up to maintain the heap's property, for example, when offering a new element into the heap.</li>
</ul></li>
<li>how?
<ul>
<li>compare the element with its parent, move it up when necessary. do this until the element does not need to be moved.</li>
</ul></li>
</ul>
<p><strong>percolateDown()</strong></p>
<ul>
<li>when to use?
<ul>
<li>the element need to be moved down to maintain the heap's property, for example, when poll the root element from the heap.</li>
</ul></li>
<li>how?
<ul>
<li>compare the element with its two children, if the smallest one of the two children is smaller than the element, swap the element with that child. do this until the element does not need to be moved.</li>
</ul></li>
</ul>
<p><strong>Heapify()</strong></p>
<ul>
<li>convert an array into a heap in <strong>O(n)</strong> time.(percolateDown)</li>
<li>how?
<ul>
<li>for each node that has at least one child, we perform percolateDown() action, in the order of from the nodes on the deepest level to the root.(从底向上，从右向左)</li>
<li>the time complexity of heapify() is O(n)</li>
</ul></li>
</ul>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122143516838.png" alt="image-20200122143516838"><figcaption>image-20200122143516838</figcaption>
</figure>
<p>​ {10, 11, 7, 2, 8, 4, 6, 13, 3}</p>
<p>all the red nodes are the nodes has at least one child. perform percolateDown() on each of them following the order: 2, 7, 11, 10:</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122143731581.png" alt="image-20200122143731581"><figcaption>image-20200122143731581</figcaption>
</figure>
<p>if the heap has n elements, n = 9 : range [0, 3] n = 8 : range [0, 3] n = 7 : range [0, 2] .... the range of indices need to perform percolateDown() is: <strong>[0, n / 2 - 1]</strong> last index's parent = ((n - 1) - 1) / 2 = (n - 2) / 2 = n / 2 - 1</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122144437341.png" alt="image-20200122144437341"><figcaption>image-20200122144437341</figcaption>
</figure>
<p><strong>update()</strong></p>
<ul>
<li>if you know the position of the element you want to update, it will take O(logn).</li>
<li>how?
<ul>
<li>either you need percolateUp(), or percolateDown() on that element.</li>
</ul></li>
<li>what if you do not know the position of the element?
<ul>
<li>you need to find the position of the element first, if not asking for help with other additional data structures, this operation is O(n)</li>
</ul></li>
</ul>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122144847244.png" alt="image-20200122144847244"><figcaption>image-20200122144847244</figcaption>
</figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122144914975.png" alt="image-20200122144914975"><figcaption>image-20200122144914975</figcaption>
</figure>
<p><strong>Time Complexity:</strong> percolateUp() - O(height) == O(logn) percolateDown() - O(height) == O(logn)</p>
<p><strong>Key points</strong></p>
<ol type="1">
<li>child index -&gt; parent index</li>
</ol>
<ul>
<li>parent = (child - 1) / 2</li>
</ul>
<ol start="2" type="1">
<li>parent index -&gt; children index</li>
</ol>
<ul>
<li>left child = parent * 2 + 1</li>
<li>right child = parent * 2 + 2</li>
</ul>
<ol start="3" type="1">
<li>basic internal operations of heap:</li>
</ol>
<ul>
<li>percolateUp(int index)
<ul>
<li>offer()</li>
<li>update()</li>
</ul></li>
<li>percolateDown(int index)
<ul>
<li>poll()</li>
<li>update()</li>
<li>heapify()</li>
</ul></li>
</ul>
<p><strong>Sorting algorithms (and heap)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">Arrays.sort(array); <span class="comment">// quicksort.</span></span><br><span class="line">Integer[] array;</span><br><span class="line">Arrays.sort(array); <span class="comment">// mergesort.</span></span><br></pre></td></tr></table></figure>
<p>quicksort:</p>
<ol type="1">
<li>wоrѕt саѕе О(n^2), аvеrаgе О(nlоgn), ѕрасе wоrѕt саѕе О(n), аvеrаgе О(lоgn)</li>
<li>unstable sort</li>
</ol>
<p>mergesort:</p>
<ol type="1">
<li>worst case O(nlogn), average O(nlogn), space worst case/average O(n)</li>
<li>stable sort</li>
</ol>
<p><strong>Stable sorting</strong> algorithms maintain the relative order of records with equal keys (i.e. values). That is, a sorting algorithm is stable if whenever there are two records R and S with the same key and with R appearing before S in the original list, R will appear before S in the sorted list.</p>
<p>Why object sorting needs to be stable? Example: sorting by scores, then by gender.</p>
<p>two male students m1 and m2, if m1's score is higher than m2, then after the sort the order is preserved.</p>
<p>https://www.youtube.com/watch?v=ZZuD6iUe3Pc</p>
<p><strong>Sorting algorithm: time O(nlogn), space O(1) ?</strong> heapSort (not stable):</p>
<ol type="1">
<li>heapify the input array to maxHeap. - O(n)</li>
<li>n times poll operation. - O(nlogn)</li>
</ol>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122150620960.png" alt="image-20200122150620960"><figcaption>image-20200122150620960</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// max heap</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">percolateDown</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// check if index is legal?</span></span><br><span class="line">    <span class="keyword">while</span> (index &lt;= (size - <span class="number">2</span>) / <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> leftChildIndex = index * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> rightChildIndex = index * <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> swapCandidate = leftChildIndex; <span class="comment">// biggest one among left child and right child</span></span><br><span class="line">        <span class="comment">// update swapCandidate if right child exists and it is bigger than left child</span></span><br><span class="line">        <span class="keyword">if</span> (rightChildIndex &lt;= size - <span class="number">1</span> &amp;&amp; array[leftChildIndex] &lt;= array[rightChildIndex]) &#123;</span><br><span class="line">            swapCandidate = rightChildIndex;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// swap if necessary</span></span><br><span class="line">        <span class="keyword">if</span> (array[index] &lt; array[swapCandidate]) &#123;</span><br><span class="line">            swap(array, index, swapCandidate);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index = swapCandidate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>count sort/bucket sort/radix sort/rainbow sort</p>
<p><strong>Heap Implementation</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.NoSuchElementException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * An example implementation of capacity limited min heap containing only int values</span></span><br><span class="line"><span class="comment"> * with the capability to do update and poll at a specific index.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * This is for demonstration of percolateUp/percolateDown methods and</span></span><br><span class="line"><span class="comment"> * how to utilize these methods to do basic heap operations.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The public methods provided are:</span></span><br><span class="line"><span class="comment"> * size()</span></span><br><span class="line"><span class="comment"> * isEmpty()</span></span><br><span class="line"><span class="comment"> * isFull()</span></span><br><span class="line"><span class="comment"> * peek()</span></span><br><span class="line"><span class="comment"> * poll()</span></span><br><span class="line"><span class="comment"> * offer()</span></span><br><span class="line"><span class="comment"> * update(int index, int value) - update the element at index to a given new value</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MinHeap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MinHeap</span><span class="params">(<span class="keyword">int</span>[] array)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (array == <span class="keyword">null</span> || array.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"input array cannot be null or empty"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.array = array;</span><br><span class="line">        size = array.length;</span><br><span class="line">        heapify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">heapify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            percolateDown(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MinHeap</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cap &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"capacity cannot be &lt;= 0"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        array = <span class="keyword">new</span> <span class="keyword">int</span>[cap];</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">percolateUp</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> parentIndex = (index - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (array[parentIndex] &gt; array[index]) &#123;</span><br><span class="line">                swap(array, parentIndex, index);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            index = parentIndex;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">percolateDown</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// check if index is legal?</span></span><br><span class="line">        <span class="keyword">while</span> (index &lt;= (size - <span class="number">2</span>) / <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> leftChildIndex = index * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> rightChildIndex = index * <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> swapCandidate = leftChildIndex; <span class="comment">// smallest one among left child and right child</span></span><br><span class="line">            <span class="comment">// update swapCandidate if right child exists and it is smaller than left child</span></span><br><span class="line">            <span class="keyword">if</span> (rightChildIndex &lt;= size - <span class="number">1</span> &amp;&amp; array[leftChildIndex] &gt;= array[rightChildIndex]) &#123;</span><br><span class="line">                swapCandidate = rightChildIndex;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// swap if necessary</span></span><br><span class="line">            <span class="keyword">if</span> (array[index] &gt; array[swapCandidate]) &#123;</span><br><span class="line">                swap(array, index, swapCandidate);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            index = swapCandidate;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] array, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = array[i];</span><br><span class="line">        array[i] = array[j];</span><br><span class="line">        array[j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">poll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException(<span class="string">"heap is empty"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = array[<span class="number">0</span>];</span><br><span class="line">        array[<span class="number">0</span>] = array[size - <span class="number">1</span>];</span><br><span class="line">        size--;</span><br><span class="line">        percolateDown(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">offer</span><span class="params">(<span class="keyword">int</span> ele)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (size == array.length) &#123;</span><br><span class="line">            <span class="keyword">int</span>[] newArray = <span class="keyword">new</span> <span class="keyword">int</span>[(<span class="keyword">int</span>)Math.round(array.length * <span class="number">1.5</span>)];</span><br><span class="line">            <span class="comment">//copy(array, newArray);</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">                newArray[i] = array[i];</span><br><span class="line">            &#125;</span><br><span class="line">            array = newArray;</span><br><span class="line">        &#125;</span><br><span class="line">        array[size] = ele;</span><br><span class="line">        size++;</span><br><span class="line">        percolateUp(size - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// return the original value.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> ele)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt; size - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException(<span class="string">"invalid index range"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> result = array[index];</span><br><span class="line">        array[index] = ele;</span><br><span class="line">        <span class="keyword">if</span> (result &gt; ele) &#123;</span><br><span class="line">            percolateUp(index);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            percolateDown(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Extensions:</strong></p>
<ul>
<li>How to make it capacity unbounded?
<ul>
<li>when size++ &amp;&amp; is Full, need to allocate a new larger array.</li>
</ul></li>
<li>How to pass in a Comparator and use the Comparator to compare and determine the priority of different elements.
<ul>
<li>whenever you need to compare two elements</li>
</ul></li>
</ul>
<h2 id="tree">Tree</h2>
<p>Tree nodes</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    TreeNode left;</span><br><span class="line">    TreeNode right;</span><br><span class="line">    <span class="comment">// TreeNode parent;</span></span><br><span class="line">    <span class="comment">// We can store parent reference as well, this will be useful for solving some problems.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TreeNode</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Usually, we use the root to represent the binary tree.</p>
<p>General Tree, each node can have arbitrary number of children.</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122185120370.png" alt="image-20200122185120370"><figcaption>image-20200122185120370</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    List&lt;TreeNode&gt; children;</span><br><span class="line">    <span class="comment">// TreeNode parent;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TreeNode</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        children = <span class="keyword">new</span> ArrayList&lt;TreeNode&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Tree is special kind of Graph:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GraphNode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    List&lt;GraphNode&gt; neightbors;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GraphNode</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        neighbors = <span class="keyword">new</span> ArrayList&lt;GraphNode&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Other representation: Adjacency list</strong> Vertices are stored as records or objects, and every vertex stores a list of adjacent vertices. This data structure allows the storage of additional data on the vertices. Additional data can be stored if edges are also stored as objects, in which case each vertex stores its incident edges and each edge stores its incident vertices.</p>
<p>When coding, you can use integers to represent vertex. In this way, a graph can be represented as:</p>
<p>List&lt;List&lt; Integer &gt;&gt; graph = ...</p>
<p>graph.get(1) -&gt; Node 1's neighbors graph.get(2) -&gt; Node 2's neighbors .... graph.get( i ) -&gt; Node i's neighbors for (Integer i : graph.get(1)) { // i is a neighbor of node 1 }</p>
<p><strong>LinkedList</strong> is a special kind of Tree (if there is only one child for each of the node in the binary tree, it can be reduced to a linked list)</p>
<p><strong>Binary Search Tree</strong></p>
<p>is a binary tree maintains the following property: for any of the nodes in the binary tree, all the nodes in its right subtree is larger than itself, all the nodes in its left subtree is smaller than itself (compared by the key stored in each of the nodes).</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122190629893.png" alt="image-20200122190629893"><figcaption>image-20200122190629893</figcaption>
</figure>
<p><strong>Basic Operations of Binary Search Tree</strong></p>
<p>search() - worst case O(n), average O(logn) insert() - worst case O(n), average O(logn) remove() - worst case O(n), average O(logn)</p>
<p><strong>Balanced Binary Search Tree</strong></p>
<p>search(), insert(), remove() operations are all guaranteed to be O(logn). Eg. AVL Tree, Red-Black Tree, etc.</p>
<p>Red-Black tree</p>
<ul>
<li>in Java: TreeMap/TreeSet</li>
<li>in C++: map/set.</li>
</ul>
<p>We are not going to implement balanced binary search tree, instead we are more interested in basic implementation.</p>
<p><strong>Traversals of Binary Tree</strong></p>
<p>preorder - root, left sub, right sub inorder - left sub, root, right sub postorder - left sub, right sub, root</p>
<p>Like LinkedList, General ways of solving problems about binary (search) tree: <strong>Recursion</strong> divide and conquer is nature of binary tree - binary tree can be easily divided into three parts</p>
<ul>
<li>solve problem for left/right subtree</li>
<li>solve the problem for root.</li>
</ul>
<p><strong>Iterative</strong></p>
<ul>
<li>could be complicated for binary tree but we need to know how.</li>
</ul>
<p>Level order traversal: Try to build one for your LaiCode test cases.</p>
<p><strong>Search in BST</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// recursive </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">search</span><span class="params">(TreeNode root, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1. process root</span></span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span> || root.key == target) &#123; <span class="comment">// terminate condition</span></span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. check left node if target less than root.key</span></span><br><span class="line">    <span class="keyword">if</span> (target &lt; root.key) &#123;</span><br><span class="line">        <span class="keyword">return</span> search(root.left, target); <span class="comment">// break point</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> search(root.right, target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Tail Recursion</strong> The recursive call is always the last execution statement. We can easily transfer the tail recursive to iterative solution.</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122195648939.png" alt="image-20200122195648939"><figcaption>image-20200122195648939</figcaption>
</figure>
<p>Not a tail recursion:</p>
<p>... return isBst(root.left, ...) &amp;&amp; isBst(root.right, ...)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// iterative</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">search</span><span class="params">(TreeNode root, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    TreeNode currentNode = root;</span><br><span class="line">    <span class="keyword">while</span> (currentNode != <span class="keyword">null</span> &amp;&amp; currentNode.key != target) &#123; <span class="comment">// terminate condition</span></span><br><span class="line">        <span class="keyword">if</span> (target &lt; currentNode) &#123;</span><br><span class="line">            currentNode = currentNode.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            currentNode = currentNode.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// exit while loop: currentNode = null || currentNode.key = target</span></span><br><span class="line">    <span class="keyword">return</span> currentNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Insert in BST</strong></p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122210638563.png" alt="image-20200122210638563"><figcaption>image-20200122210638563</figcaption>
</figure>
<p><strong>Recursion I</strong> A very common way when the tree structure could be changed, in this case, we return the new root after the change (remind about the same case of Linked List? ).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">insert</span><span class="params">(TreeNode root, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        TreeNode newRoot = <span class="keyword">new</span> TreeNode(key);</span><br><span class="line">        <span class="keyword">return</span> newRoot;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root.key &lt; key) &#123;</span><br><span class="line">        root.right = insert(root.right, key);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.key &gt; key) &#123;</span><br><span class="line">        root.left = insert(root.left, key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Recursion II (Remove redundant operation)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">insert</span><span class="params">(TreeNode root, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TreeNode(target);</span><br><span class="line">    &#125;</span><br><span class="line">    helper(root, target);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helper</span><span class="params">(TreeNode root, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (target == root.key) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target &lt; root.key) &#123;</span><br><span class="line">        <span class="keyword">if</span> (root.left == <span class="keyword">null</span>) &#123;</span><br><span class="line">            root.left = <span class="keyword">new</span> TreeNode(target);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            helper(root.left, target);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">            root.right = <span class="keyword">new</span> TreeNode(target);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            helper(root.right, target);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol type="1">
<li><p>(target == root.key) return; // terminate</p></li>
<li><p>target &lt; root.key:</p>
<ul>
<li>root.left == null; root.left = new TreeNode(target); // terminate</li>
<li>else: helper(root.left, target);</li>
</ul></li>
<li>target &gt; root.key:
<ul>
<li>root.right == null; root.right = new TreeNode(target); //terminate</li>
<li>else: helper(root.right, target);</li>
</ul></li>
</ol>
<p>第二种只做了一次赋值，第一种做了多次赋值，但第一种对以后的问题有启发。</p>
<p><strong>Iterative I</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">insert</span><span class="params">(TreeNode root, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    TreeNode newNode = <span class="keyword">new</span> TreeNode(target);</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    TreeNode current = root;</span><br><span class="line">    <span class="keyword">while</span> (current.key != target) &#123;</span><br><span class="line">        <span class="keyword">if</span> (current.key &gt; target) &#123;</span><br><span class="line">            <span class="keyword">if</span> (current.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                current = current.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                current.left = newNode;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (current.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                current = current.right;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                current.right = newNode;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Iterative II</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">insert</span><span class="params">(TreeNode root, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TreeNode(target);</span><br><span class="line">    &#125;</span><br><span class="line">    TreeNode returnRoot = root;</span><br><span class="line">    TreeNode pre = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">        pre = root;</span><br><span class="line">        <span class="keyword">if</span> (root.key &lt; target) &#123;</span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.key &gt; target) &#123;</span><br><span class="line">            root = root.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> returnRoot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pre.target &lt; target) &#123;</span><br><span class="line">        pre.right = <span class="keyword">new</span> TreeNode(target);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pre.target &gt; target) &#123;</span><br><span class="line">        pre.left = <span class="keyword">new</span> TreeNode(target);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> returnRoot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Delete in BST</strong></p>
<p><img src="/2020/01/17/SDE实践/image-20200122213750584.png" alt="image-20200122213750584"> delete(root, 8) step one: find the node to be deleted - trivial? step two: delete it ... - not trivial? how many possible situations?</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122213854361.png" alt="image-20200122213854361"><figcaption>image-20200122213854361</figcaption>
</figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200122213935139.png" alt="image-20200122213935139"><figcaption>image-20200122213935139</figcaption>
</figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200123111451639.png" alt="image-20200123111451639"><figcaption>image-20200123111451639</figcaption>
</figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200123111633573.png" alt="image-20200123111633573"><figcaption>image-20200123111633573</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// return: the node that replace target</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">delete</span><span class="params">(TreeNode root, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// find target node</span></span><br><span class="line">    <span class="keyword">if</span> (root.val &gt; target) &#123;</span><br><span class="line">        root.left = delete(root.left, target);</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.val &lt; target) &#123;</span><br><span class="line">        root.right = delete(root.right, target);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// guarantee root != null &amp;&amp; root.val == target</span></span><br><span class="line">    <span class="keyword">if</span> (root.left == <span class="keyword">null</span>) &#123;  <span class="comment">// case 1, 2</span></span><br><span class="line">        <span class="keyword">return</span> root.right;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root.right == <span class="keyword">null</span>) &#123;  <span class="comment">// case 3</span></span><br><span class="line">        <span class="keyword">return</span> root.left;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// guarentee root.left != null &amp;&amp; root.right != null</span></span><br><span class="line">    <span class="comment">// 4.1</span></span><br><span class="line">    <span class="keyword">if</span> (root.right.left == <span class="keyword">null</span>) &#123;</span><br><span class="line">        root.right.left = root.left;</span><br><span class="line">        <span class="keyword">return</span> root.right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4.2</span></span><br><span class="line">    <span class="comment">// 1. find and delete smallest node in root.right.</span></span><br><span class="line">    TreeNode smallest = deleteSmallest(root.right);</span><br><span class="line">    <span class="comment">// 2. connect the smallest node with root.left and root.right.</span></span><br><span class="line">    smallest.left = root.left;</span><br><span class="line">    smallest.right = root.right;</span><br><span class="line">    <span class="comment">// 3. return the smallest node.</span></span><br><span class="line">    <span class="keyword">return</span> smallest;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> TreeNode <span class="title">deleteSmallest</span><span class="params">(TreeNode cur)</span> </span>&#123;</span><br><span class="line">    TreeNode prev = cur;</span><br><span class="line">    cur = cur.left;</span><br><span class="line">    <span class="keyword">while</span> (cur.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">        prev = cur;</span><br><span class="line">        cur = cur.left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// cur is the smallest one, and prev is its parent.</span></span><br><span class="line">    <span class="comment">// invariance: cur (prev.left) does not have left child</span></span><br><span class="line">    prev.left = prev.left.right;</span><br><span class="line">    <span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Binary Tree Traversals (iteratively)</strong></p>
<p>Too easy to use recursion to solve the traversal problem.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inorder</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    inorder(root.left);</span><br><span class="line">	System.out.println(root.key);</span><br><span class="line">	inorder(root.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Why</strong> do we need the Iterative solution? since we already have the simple, elegant recursive solution.</p>
<p><strong>Recall here for Java memory areas:</strong></p>
<ul>
<li>STACK: storing the local variables and other information for each of the method calls</li>
<li>HEAP: allocating spaces for dynamically created objects</li>
</ul>
<p><strong>How recursion works</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    print(x-<span class="number">1</span>); <span class="comment">// bp</span></span><br><span class="line">    System.out.println(x);</span><br><span class="line">    <span class="comment">//return;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print(<span class="number">10</span>)</span><br><span class="line">   </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 1</span></span><br><span class="line"><span class="comment">* 2</span></span><br><span class="line"><span class="comment">* 3</span></span><br><span class="line"><span class="comment">* 4</span></span><br><span class="line"><span class="comment">* 5</span></span><br><span class="line"><span class="comment">* 7</span></span><br><span class="line"><span class="comment">* 8</span></span><br><span class="line"><span class="comment">* 9</span></span><br><span class="line"><span class="comment">* 10</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>The unfinished methods must be retained in STACK before it can return: when we call print(10), what will happen?</p>
<p><strong>STACK:</strong> tail -&gt; { } &lt;- head</p>
<p>Does recursion consume extra spaces? - YES, the method calls use spaces on STACK. Think about calling print(1000000) now, what will happen?</p>
<p>The space consumed on STACK: <strong>O(# of method call levels).</strong></p>
<p>In Java, STACK is usually a size limited memory area. By default, a several thousands levels recursion call would easily eat up all the space and throw StackOverFlowException - this is something you have to keep in mind(especially when the solution is in recursive way).</p>
<p>Iterative way is good because it needs much less space of STACK(There is probably only O(1) method call levels, so O(1) space on STACK).</p>
<p>It is not easy to convert all recursion solutions to a &quot;while loop&quot; solution without any other auxiliary data structures' help.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inorder</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    inorder(root.left);</span><br><span class="line">	System.out.println(root.key);</span><br><span class="line">	inorder(root.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>There are two paths of recursion need to follow instead of one, and we need to finish the first branch, then the second one.</p>
<p>In this case, we will need something else to help us: The recursion is internally done by using STACK to maintain the method call levels and directions, we can simulate this ourselves, so a stack will be needed.</p>
<p><strong>The difference is, we use our own stack and the space used by our own stack is on HEAP. The space consumed on STACK is trivial. - We do not change the total space consumption, but we move out the space consumption of STACK to HEAP.</strong></p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200123201938717.png" alt="image-20200123201938717"><figcaption>image-20200123201938717</figcaption>
</figure>
<p><strong>Once the root is traversed, we can print it directly and we do not need to store it in the stack any more.</strong></p>
<ol type="1">
<li>We always print root first, then root can be eliminated from stack.</li>
<li>We traverse left sub first, so the right sub should be retained in the stack before the left sub is done.</li>
</ol>
<figure>
<img src="/2020/01/17/SDE实践/image-20200123202142846.png" alt="image-20200123202142846"><figcaption>image-20200123202142846</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(TreeNode)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</span><br><span class="line">    stack.offerFirst(root);</span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty) &#123;</span><br><span class="line">        TreeNode cur = stack.pollFisrt();</span><br><span class="line">        System.out.println(cur.value);</span><br><span class="line">        <span class="keyword">if</span> (cur.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">            stack.offerFirst(cur.right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cur.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">            stack.offerFirst(cur.left);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200123204430689.png" alt="image-20200123204430689"><figcaption>image-20200123204430689</figcaption>
</figure>
<p>The problem is, we can not throw away the root in the stack before we traversed all the nodes in left subtree. <strong>How can we know we have already traversed all the nodes in left sub?</strong></p>
<p>The root is the top element in the stack, use a helper node to store the next &quot;visiting&quot; node and subtree.</p>
<ol type="1">
<li>when helper node is not null, we should traverse the subtree, so we push helper and we go left</li>
<li>when helper is null. means the left subtree of the root is finished, the root is the top element in the stack. We can print the top and let helper = top.right. (traverse the left subtree first, then top, then right subtree)</li>
<li>do 1 and 2 until helper is null and there is no nodes left in the stack.</li>
</ol>
<figure>
<img src="/2020/01/17/SDE实践/image-20200123205810909.png" alt="image-20200123205810909"><figcaption>image-20200123205810909</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inOrder</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1. initial check</span></span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2. we need a stack and a helper node.</span></span><br><span class="line">    Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    TreeNode helper = root;</span><br><span class="line">    <span class="comment">// 3. </span></span><br><span class="line">    <span class="keyword">while</span> (helper != <span class="keyword">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (helper != <span class="keyword">null</span>) &#123;</span><br><span class="line">            stack.offerFirst(helper);</span><br><span class="line">            helper = helper.left;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            helper = stack.pollFirst();</span><br><span class="line">            System.out.println(helper.value);</span><br><span class="line">            helper = helper.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200123210455528.png" alt="image-20200123210455528"><figcaption>image-20200123210455528</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</span><br><span class="line">    Deque&lt;TreeNode&gt; temp = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</span><br><span class="line">    stack.offerFist(root);</span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty) &#123;</span><br><span class="line">        TreeNode cur = stack.pollFirst();</span><br><span class="line">        temp.offerFirst(cur);</span><br><span class="line">        <span class="keyword">if</span> (root.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">            stack.offerFirst(root.left);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (root.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">            stack.offerFirst(root.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!temp.isEmpty()) &#123;</span><br><span class="line">        System.out.println(temp.pollFirst().value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What is the drawback of Method 1 if we print the nodes on the fly? Need to store everything in memory before we can get the whole post order traversal sequence.</p>
<p><strong>Method 2:</strong></p>
<p>The problem is, we need to traverse both left and right subtrees first, then we can eliminate the root from the stack. We need a mechanism to know, when we finished visiting all subtrees' nodes.</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200123213157747.png" alt="image-20200123213157747"><figcaption>image-20200123213157747</figcaption>
</figure>
<p><strong>What we need to know?</strong></p>
<ul>
<li>The Direction! we are visiting down? or returning from left? or returning from right?</li>
</ul>
<p>The root is the top element in the stack Maintain a previous Node, to record the previous visiting node on the traversing path, so that we know what the direction we are taking now and what is the direction we are taking next.</p>
<ul>
<li>root = stack.top</li>
<li>if previous is null -&gt; going down (left subtree has priority) (初始情况)</li>
<li>if previous is current's parent, -&gt; going down(left subtree has priority)</li>
<li>if previous == current.left, -&gt; left subtree finished, going current.right</li>
<li>if previous == current.right, -&gt; right subtree finished, pop current, going up</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postOrder</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// inital check</span></span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// local variables</span></span><br><span class="line">    Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    TreeNode prev = <span class="keyword">null</span>;</span><br><span class="line">    stack.offerFirst(root);</span><br><span class="line">    </span><br><span class="line">  	<span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">        TreeNode current = stack.peekFirst();</span><br><span class="line">        <span class="comment">// going down</span></span><br><span class="line">        <span class="keyword">if</span> (prev == <span class="keyword">null</span> || current == prev.left || current = prev.right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (current.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stack.offerFirst(current.left);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (current.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stack.offerFrist(current.right);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(current.value);</span><br><span class="line">                stack.pollFirst();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (prev == current.left) &#123; <span class="comment">// from left subtree</span></span><br><span class="line">            <span class="keyword">if</span> (current.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">                stack.offerFirst(current.right);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(current.value);</span><br><span class="line">                stack.pollFirst();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// from right subtree</span></span><br><span class="line">            System.out.println(current.value);</span><br><span class="line">            stack.pollFirst();</span><br><span class="line">        &#125;</span><br><span class="line">        prev = current;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/17/SDE实践/image-20200123215943796.png" alt="image-20200123215943796"> <img src="/2020/01/17/SDE实践/image-20200123220002722.png" alt="image-20200123220002722"></p>
<p>This solution is important because this is the closest imitation of how actually the recursion is done in STACK, and it can be used as a general framework to iteratively do pre-order and in-order traversal as well.</p>
<p>If you look closely, the recursion is actually a DFS procedure on the binary tree. pre-order, in-order, post-order are following the same DFS procedure, and the only difference is when you want to print the node.</p>
<h2 id="map-set-hash">Map &amp; Set &amp; Hash</h2>
<p><strong>Set</strong> A collection that <strong>can not contain duplicate elements</strong>.</p>
<p>The Java platform contains three general-purpose Set implementations: HashSet, TreeSet, and LinkedHashSet.</p>
<ul>
<li><p><strong>HashSet</strong>: which stores its elements in a <strong>hashtable</strong>, is the best-performing implementation; however it makes no guarantee concerning the order of iteration</p></li>
<li><p><strong>TreeSet</strong>: which stores its elements in a red-black tree(balanced binary search tree), orders its elements based on their values</p></li>
<li><p><strong>LinkedHashSet</strong>: it is a HashSet and also it is a LinkedList, it maintains the order when each of the elements is inserted into the HashSet.</p></li>
</ul>
<p><strong>Map</strong></p>
<p>A collection that maps keys to values. A Map cannot contain duplicate keys; each key can map to one value.</p>
<ul>
<li>A collection that stores &lt;key, value&gt; pairs, such that no duplicate keys are allowed.</li>
</ul>
<p>The Java platform contains three general-purpose Map implementations: <strong>HashMap</strong>, TreeMap, and LinkedHashMap.</p>
<p><strong>HashMap</strong></p>
<p><strong>Common API</strong> http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html</p>
<p>V put(K key, V value) V get(K key) V remove(K key) boolean containsKey(K key) Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet() - get the set view of all the entries in the hashmap Set&lt; K &gt; keySet() - get the set view of all the keys in the hashmap Collection&lt; V &gt; values() - get the collection view of all the values in the hashmap boolean containsValue(V value) - O(n) void clear() int size() boolean isEmpty()</p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200125192204047.png" alt="image-20200125192204047"><figcaption>image-20200125192204047</figcaption>
</figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; employerNumbers = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">employerNumbers.put(<span class="string">"yahoo"</span>, <span class="number">1</span>);</span><br><span class="line">System.out.println(employerNumbers); <span class="comment">// &#123;yahoo=1&#125;</span></span><br><span class="line">employerNumbers.put(<span class="string">"google"</span>, <span class="number">2</span>);</span><br><span class="line">System.out.println(employerNumbers); <span class="comment">// &#123;yahoo=1, google=2&#125;</span></span><br><span class="line">Integer yc = employerNumbers.get(<span class="string">"yahoo"</span>); <span class="comment">// yc = 1</span></span><br><span class="line">yc = employerNumbers.put(<span class="string">"yahoo"</span>, <span class="number">5</span>); <span class="comment">// yc is the previous value for key "yahoo"</span></span><br><span class="line">System.out.println(employerNumbers); <span class="comment">// &#123;yahoo=5, google=2&#125;</span></span><br><span class="line">System.out.println(yc); <span class="comment">// yc = 1</span></span><br><span class="line">yc = employerNumbers.get(<span class="string">"yahoo"</span>); <span class="comment">// yc = 5</span></span><br><span class="line">Integer fc = employerNumbers.get(<span class="string">"facebook"</span>); <span class="comment">// fc = null</span></span><br><span class="line"><span class="comment">// if the key is not in the map, get(key) will return null</span></span><br><span class="line"><span class="keyword">boolean</span> fe = employerNumbers.containsKey(<span class="string">"facebook"</span>); <span class="comment">// fe = false</span></span><br><span class="line">System.out.println(fc); <span class="comment">// null</span></span><br><span class="line">System.out.println(fe); <span class="comment">// false</span></span><br><span class="line">fc = employerNumbers.remove(<span class="string">"facebook"</span>);</span><br><span class="line">System.out.println(fc); <span class="comment">// null</span></span><br><span class="line">Integer gc = employerNumbers.remove(<span class="string">"google"</span>);</span><br><span class="line">System.out.println(gc); <span class="comment">// 2</span></span><br><span class="line">System.out.println(employerNumbers); <span class="comment">// &#123;yahoo=5&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>HashMap vs. Hashtable</strong> Similar to Vector vs. ArrayList</p>
<p>Vector, Hashtable exist from Java 1.0 ArrayList, HashMap introduced from Java 5</p>
<ol type="1">
<li><p>Hashtable not allow null key, but HashMap allow one null key.</p></li>
<li><p>Vector, Hashtable operations are synchronized (thread safe), introduce a lot of performance penalty</p></li>
</ol>
<p><strong>We do not use Hashtable anymore.</strong></p>
<p>A Hashtable implementation.</p>
<ul>
<li>A table of buckets(an array of buckets), using the array index to denote each bucket.</li>
<li>For each &lt;key, value&gt;, it goes to one of the buckets, the bucket index is determined by a hash function applied on key and the size of array.</li>
</ul>
<figure>
<img src="/2020/01/17/SDE实践/image-20200125195818722.png" alt="image-20200125195818722"><figcaption>image-20200125195818722</figcaption>
</figure>
<ul>
<li>Collision Control
<ul>
<li>Collision - two keys mapped to the same bucket</li>
<li>Separate Chaining(Close Addressing) - the element of each of the buckets is actually a single linked list.</li>
<li>If different Keys are determined to use the same bucket, they will be chained in the list.</li>
</ul></li>
</ul>
<figure>
<img src="/2020/01/17/SDE实践/image-20200125200213475.png" alt="image-20200125200213475"><figcaption>image-20200125200213475</figcaption>
</figure>
<ul>
<li><p>What are the elements in the buckets? Singly Linked List, each node contains one &lt;key, value&gt; pair</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    K key;</span><br><span class="line">    V value;</span><br><span class="line">    Entry&lt;K, V&gt; next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>https://docs.oracle.com/javase/8/docs/api/java/util/Map.Entry.html</p></li>
</ul>
<p><strong>HashMap operations</strong></p>
<ul>
<li><p>put(key, value)</p>
<ol type="1">
<li><p>int hash = hash(key) -- hash</p></li>
<li><p>int index = hash % table_size -- index</p></li>
<li><p>search for the list resides in the bucket to see if the key already exists</p>
<ul>
<li>if not find the same key already existed, add a new Entry node to the list</li>
<li>if find an Entry with the same key, update the value of that Entry</li>
</ul></li>
</ol></li>
<li>get(key)
<ol type="1">
<li>int hash = hash(key) -- hash</li>
<li>int index = hash % table_size -- index</li>
<li>search for the list resides in the bucket to see if the key already exists</li>
</ol></li>
</ul>
<p>HashMap can only has one null key, it is always mapped to bucket 0.</p>
<p>Get into a little details about HashMap Implementation:</p>
<ul>
<li>array of entries</li>
<li>each entry is actually a singly linked list (handle collision)
<ul>
<li>contains the &lt;key, value&gt; pair</li>
</ul></li>
</ul>
<ol type="1">
<li><p>Define the class for each entry:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> K key;</span><br><span class="line">    V value;</span><br><span class="line">    Entry&lt;K, V&gt; next;</span><br><span class="line">    Entry(K key, V value) &#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> K <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>maintain an array of entries</p>
<p>Entry&lt;K, V&gt;[] array</p>
<ul>
<li>To get(K key), put(K key, V value), remove(K key), we follow the steps
<ul>
<li>hash(key) to hash#</li>
<li>hash# to entry index in the array</li>
<li>from the corresponding singly linked list, iterate all of the nodes to find if the same key exists.</li>
</ul></li>
</ul></li>
<li><p>hash(key) to get the hash#</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// return the hash# of the key</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> hashNumber = key.hashCode();</span><br><span class="line">    <span class="comment">// postprocessing to make the hashNumber non-negative.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>from the hash#, mapped to the entry index.</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getIndex</span><span class="params">(<span class="keyword">int</span> hashNumber)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// return the corrsponding index of array.</span></span><br><span class="line">    <span class="keyword">return</span> hashNumber % array.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>When iterate the corresponding entry for the given key, which is actually a singly linked list, we need compare each of the entry in the list, if the key is the same as the key we want, then it is the entry we want to find.</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Entry&lt;K, V&gt; cur = array[index];</span><br><span class="line"><span class="keyword">while</span> (cur != <span class="keyword">null</span>) &#123;</span><br><span class="line">    K curKey = cur.getKey();</span><br><span class="line">    <span class="keyword">if</span> (curKey is the same as given key) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p><strong>Two Questions Here:</strong></p>
<ol type="1">
<li>&quot;HashMap get(key), put(key, value), remove(key) is O(1)&quot;, is it always true? What is the major factor affecting the time complexity? <strong>hash(key) -&gt; key.hashCode()</strong></li>
<li>When we need to know if a key is already in the HashMap, we need to find its bucket, then traverse the linked list in that bucket to see if there is a same key already existed. how do we define &quot;the same key&quot;? <strong>key.equals(anotherKey)</strong></li>
</ol>
<p><strong>Very Important: HashMap use</strong></p>
<ul>
<li>key.hashCode() to determine the entry index for the key</li>
<li>key.equals() to determine whether two keys are the same keys.</li>
</ul>
<p><strong>==, equals(), hashCode()</strong></p>
<ul>
<li><strong>==</strong>
<ul>
<li>determine if two primitive type has the same value.</li>
<li>determine if two reference are pointed to the same object.</li>
</ul></li>
<li><p><strong>equals(), hashCode()</strong></p>
<ul>
<li><p>defined in Object class, Object is the root class for any Java class</p></li>
<li><p>any Java class implicitly extends Object class, so if in the subclass these two methods are not overridden, it inherits what it defines in Object class.</p></li>
<li><p>the default implementation of equals() is to check if the two references are pointed to the same object &quot;==&quot;.</p></li>
<li><p>the default implementation of hashCode() returns a &quot;unique hash value&quot; for the object based on its memory address.</p></li>
</ul>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Object</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span> == obj;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// here it returns the object's hash value(based on its memory address)</span></span><br><span class="line">        <span class="comment">// it is unique for each object.</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>sometimes we do not want to compare the reference ... we want to compare the object's content. <strong>Example: (from an existing class)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// s1 and s2 are different String objects</span></span><br><span class="line">String s1 = <span class="string">"abc"</span>;</span><br><span class="line">String s2 = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line"><span class="comment">// this will return false, "==" always compare if they are the same object</span></span><br><span class="line">s1 == s2;</span><br><span class="line"><span class="comment">// this will return true, equals() for String class actually checks the "value"</span></span><br><span class="line">s1.equals(s2);</span><br></pre></td></tr></table></figure>
<p>Why s1.equals(s2) == true ?</p>
<p>in String class, the equals() method is overridden:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span>[] array;</span><br><span class="line">    <span class="keyword">int</span> offset;</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="keyword">this</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> String)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        String another = (String) obj;</span><br><span class="line">        <span class="comment">// check each of the characters of the two String object if they are the same</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.length != another.length) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.array[<span class="keyword">this</span>.offset + i] ! = another.array[another.offset + i] &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// return true if they match</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Example(our own class):</strong></p>
<p>class has to override equals(), hashCode() if you want to have a different meaning than comparing the references.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// representing a (x, y) coordinate on the grid.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coordinate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> y;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Coordinate</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Coordinate one = <span class="keyword">new</span> Coordinate(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">Coordinate another = <span class="keyword">new</span> Coordinate(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">one == another; <span class="comment">// false</span></span><br><span class="line">one.equals(another); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Coordinate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> y;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Coordinate</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> Coordinate)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Coordinate another = (Coordinate) obj;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.x == another.x &amp;&amp; <span class="keyword">this</span>.y == another.y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x * <span class="number">101</span> + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Coordinate one = <span class="keyword">new</span> Coordinate(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">Coordinate another = <span class="keyword">new</span> Coordinate(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">one == another; <span class="comment">// false</span></span><br><span class="line">one.equals(another); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><strong>What about hashCode() ?</strong></p>
<p>Remember, in Hashmap, key.hashCode() method determines which entry the key will go to, we need to guarantee the same keys always go to the same entry.</p>
<p>(&quot;yahoo&quot;(1), 2) -- index = 1 put(&quot;yahoo&quot;(2), 5), -&gt; &quot;yahoo&quot;(2).hashCode() -- index,</p>
<p>In Java, There is a contract between equals() and hashCode(), the developers need to maintain:</p>
<ul>
<li>If one.equals(two), it is a must that one.hashCode() == two.hashCode()</li>
<li>If one.hashCode() == two.hashCode(), it is not necessary one.equals(two)</li>
</ul>
<p><strong>When you want to override equals(), please definitely override hashCode() as well</strong> Only by doing this, you can make sure the HashMap will still work for the key type.</p>
<p><strong>Example:</strong></p>
<p><strong>not override equals(), hashCode()</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Coordinate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> y;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Coordinate</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"("</span> + x + <span class="string">","</span> + y + <span class="string">")"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Map&lt;Coordinate, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Coordinate c1 = <span class="keyword">new</span> Coordinate(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        map.put(c1, <span class="number">5</span>);</span><br><span class="line">        Coordinate c2 = <span class="keyword">new</span> Coordinate(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        map.put(c2, <span class="number">6</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;(1,2)=5, (1,2)=6&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>override equals(), override hashCode()</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Coordinate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> y;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Coordinate</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"("</span> + x + <span class="string">","</span> + y + <span class="string">")"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> Coordinate)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Coordinate another = (Coordinate) obj;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.x == another.x &amp;&amp; <span class="keyword">this</span>.y == another.y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x * <span class="number">101</span> + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Map&lt;Coordinate, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Coordinate c1 = <span class="keyword">new</span> Coordinate(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        map.put(c1, <span class="number">5</span>);</span><br><span class="line">        Coordinate c2 = <span class="keyword">new</span> Coordinate(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        map.put(c2, <span class="number">6</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;(1,2)=6&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>hashCode() is VERY important!</strong></p>
<ol type="1">
<li>The performance of HashMap solely depends on how good the hashCode() is.</li>
</ol>
<ul>
<li>bad hashCode() can lead to linear time complexity in extreme case, for example, if all the keys has the same hash number returned by .hashCode().</li>
</ul>
<ol start="2" type="1">
<li>easy, fast, efficient</li>
<li>minimize collision, as evenly distributed as possible</li>
</ol>
<p><strong>Common hashCode() implementation</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Combo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    B b;</span><br><span class="line">    C c;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Combo</span><span class="params">(<span class="keyword">int</span> a, B b, C c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">        <span class="keyword">this</span>.b = b;</span><br><span class="line">        <span class="keyword">this</span>.c = c;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a * <span class="number">31</span> * <span class="number">31</span> + b.hashCode() * <span class="number">31</span> + c.hashCode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure>
<img src="/2020/01/17/SDE实践/image-20200126142048373.png" alt="image-20200126142048373"><figcaption>image-20200126142048373</figcaption>
</figure>
<p>一般直接采取自动生成的方式</p>
<p><strong>Rehashing, load factor</strong></p>
<ul>
<li>Rehashing
<ul>
<li>is needed when there are too many &lt;key, value&gt; pairs maintained in the hashmap, -&gt; too many collisions.</li>
<li>expand the array to a larger one and move all the &lt;key, value&gt; pairs to the new array (in HashMap by default, the array size is doubled each time.)</li>
<li>Rehashing is global wise - meaning all the &lt;key, value&gt; pairs need to participate.</li>
</ul></li>
<li>load factor
<ul>
<li>to control when rehashing is needed, maintain the ratio of number of &lt;key, value&gt; pairs / number of buckets</li>
<li>default 0.75</li>
<li>when the the ratio exceeds the limit, rehashing will happen.</li>
</ul></li>
</ul>
<p><strong>HashSet</strong></p>
<p>It is backed up by a HashMap instance. Only care about the Key here.</p>
<p>Common API https://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html boolean add(E e) boolean remove(Object o) boolean contains(Object o) void clear() int size() boolean isEmpty()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HashSet</span>&lt;<span class="title">K</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;K, Object&gt; map;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// special object used for all the existing keys</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        map = <span class="keyword">new</span> HashMap&lt;K, Object&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.containsKey(key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.put(key, PRESENT) == <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="hashmap-implementation-arrays-collections">HashMap Implementation, Arrays, Collections</h2>
<p><strong>Review About HashMap:</strong></p>
<ul>
<li>where are equals() and hashCode() from?
<ul>
<li>the difference between &quot;==&quot; and equals()</li>
</ul></li>
<li>The contract between equals() and hashCode()
<ul>
<li>If o1.equals(o2) = true, then you have to guarantee o1.hashCode() == o2.hashCode()</li>
<li>If o1.hashCode() == o2.hashCode(), it is not necessary o1.equals(o2)</li>
</ul></li>
<li><p>The performance of HashMap is controlled by hashCode()</p></li>
<li><p>If hashCode() return the same int value for all the objects, what will happen? It will be transferred to a single linked list.</p></li>
</ul>
<p><strong>HashMap Implementation</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A hashtable implementation of map, demonstration purpose, generic type is provided</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * supported operations:</span></span><br><span class="line"><span class="comment"> * size()</span></span><br><span class="line"><span class="comment"> * isEmpty()</span></span><br><span class="line"><span class="comment"> * clear()</span></span><br><span class="line"><span class="comment"> * put(K key, V value)</span></span><br><span class="line"><span class="comment"> * get(K key)</span></span><br><span class="line"><span class="comment"> * containsKey(K key)</span></span><br><span class="line"><span class="comment"> * containsValue(V value) // check if the desired value is in the map. O(n)</span></span><br><span class="line"><span class="comment"> * remove(K key)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Node is a static class of MyHashMap, since it is:</span></span><br><span class="line">    <span class="comment">// very closely bonded to MyHashMap class.</span></span><br><span class="line">    <span class="comment">// we probably need to access this class outside from MyHashMap class.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        Node&lt;K, V&gt; next;</span><br><span class="line">        Node(K key, V value) &#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> K <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> key;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> V <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// static final variable are global constants</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACIT = <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFULT_LOAD_FACTOR = <span class="number">0.75f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node&lt;K, V&gt;[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size; <span class="comment">// how many key-value pairs are actually stored in the HashMap</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> loadFactor; <span class="comment">// determine when to rehash.</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyHashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(DEFAULT_CAPACIT, DEFULT_LOAD_FACTOR);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyHashMap</span><span class="params">(<span class="keyword">int</span> cap, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cap &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"cap can not be &lt;= 0"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.array = (Node&lt;K, V&gt;[])(<span class="keyword">new</span> Node[cap]); <span class="comment">// create an array and make it usable for generics</span></span><br><span class="line">        <span class="keyword">this</span>.size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Arrays.fill(<span class="keyword">this</span>.array, <span class="keyword">null</span>);</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// non-negative</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1. null key</span></span><br><span class="line">        <span class="keyword">if</span> (key == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. 3. hashCode()</span></span><br><span class="line">        <span class="comment">// int code = key.hashCode();</span></span><br><span class="line">        <span class="comment">// return code &gt;= 0 ? code : -code;</span></span><br><span class="line">        <span class="comment">// int range = [-2^31, 2^31-1]</span></span><br><span class="line">        <span class="comment">// -Interger.MIN_VALUE = Integer.MIN_VALUE; -&gt; overflow.</span></span><br><span class="line">        <span class="keyword">return</span> key.hashCode() &amp; <span class="number">0X7FFFFFFF</span>; <span class="comment">// guarantee non-negative</span></span><br><span class="line">        <span class="comment">// 01111111 11111111 11111111 11111111</span></span><br><span class="line">        <span class="comment">// Reason: java's % return remainder rather than modulus. The remainder can be negative.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getIndex</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hash(key) % array.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">equalsValue</span><span class="params">(V v1, V v2)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// v1, v2 all possibly to be null</span></span><br><span class="line">        <span class="keyword">if</span> (v1 == <span class="keyword">null</span> &amp;&amp; v2 == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (v1 == <span class="keyword">null</span> || v2 == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> v1.equals(v2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// return v1 == v2 || v1 != null &amp;&amp; v1.equals(v2);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// O(n), traverse the whole array, and traverse each of the linked list in the array.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsValue</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// special case.</span></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;K, V&gt; node : array) &#123;</span><br><span class="line">            <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// check if the value equals()</span></span><br><span class="line">                <span class="comment">// value, node.getValue() all possible to be null.</span></span><br><span class="line">                <span class="keyword">if</span> (equalsValue(node.value, value)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">equalsKey</span><span class="params">(K k1, K k2)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// k1, k2 all possibly to be null.</span></span><br><span class="line">        <span class="keyword">if</span> (k1 == <span class="keyword">null</span> &amp;&amp; k2 == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (k1 == <span class="keyword">null</span> || k2 == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> k1.equals(k2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// return k1 == k2 || k1 != null &amp;&amp; k1.equals(k2);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">containsKey</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// get the index of the key</span></span><br><span class="line">        <span class="keyword">int</span> index = getIndex(key);</span><br><span class="line">        Node&lt;K, V&gt; node = array[index];</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// check if the key equals()</span></span><br><span class="line">            <span class="comment">// key, node.key() all possible to be null.</span></span><br><span class="line">            <span class="keyword">if</span> (equalsKey(node.key, key)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if key does not exists in the HashMap, return null.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = getIndex(key);</span><br><span class="line">        Node&lt;K, V&gt; node = array[index];</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// check if the key equals()</span></span><br><span class="line">            <span class="comment">// key, node.key() all possible to be null</span></span><br><span class="line">            <span class="keyword">if</span> (equalsKey(node.key, key)) &#123;</span><br><span class="line">                <span class="keyword">return</span> node.value;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// insert/update</span></span><br><span class="line">    <span class="comment">// if the key already exists, return the old corresponding value.</span></span><br><span class="line">    <span class="comment">// if the key not exists, return null.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = getIndex(key);</span><br><span class="line">        Node&lt;K, V&gt; head = array[index];</span><br><span class="line">        Node&lt;K, V&gt; node = head;</span><br><span class="line">        <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// check if the key equals()</span></span><br><span class="line">            <span class="comment">// key, node.key() all possible to be null</span></span><br><span class="line">            <span class="keyword">if</span> (equalsKey(node.key, key)) &#123;</span><br><span class="line">                V result = node.value;</span><br><span class="line">                node.value = value;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// append the new node before the head and update the new head</span></span><br><span class="line">        <span class="comment">// insert operation</span></span><br><span class="line">        Node&lt;K, V&gt; newNode = <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        newNode.next = head;</span><br><span class="line">        array[index] = newNode; <span class="comment">// new head is here.</span></span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">if</span> (needRehashing()) &#123;</span><br><span class="line">            rehashing();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">needRehashing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// float loadFactor;</span></span><br><span class="line">        <span class="keyword">float</span> ratio = (size + <span class="number">0.0f</span>) / array.length;</span><br><span class="line">        <span class="keyword">return</span> ratio &gt;= loadFactor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">rehashing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// new double sized array.</span></span><br><span class="line">        <span class="comment">// for each node in the old array.</span></span><br><span class="line">        <span class="comment">// do the put() operation to the new larger array.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if the key exists, remove the &lt;key,value&gt; from the HashMap, return the value.</span></span><br><span class="line">    <span class="comment">// if the key not exists, return null.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">remove</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// get index</span></span><br><span class="line">        <span class="comment">// delete operation on the linked list.</span></span><br><span class="line">        <span class="comment">// size--</span></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>What is a &quot;view&quot;?</strong></p>
<p>entrySet() -&gt; view</p>
<p>public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()</p>
<p>Returns a Set view of the mappings contained in this map. The set is backed by the map, so changes to the map are reflected in the set, and vice-versa. If the map is modified while an iteration over the set is in progress (except through the iterator's own remove operation, or through the setValue operation on a map entry returned by the iterator) the results of the iteration are undefined. The set supports element removal, which removes the corresponding mapping from the map, via the Iterator.remove, Set.remove, removeAll, retainAll and clear operations. It does not support the add or addAll operations.</p>
<p>Specified by: entrySet in interface Map&lt;K,V&gt;</p>
<p>Specified by: entrySet in class AbstractMap&lt;K,V&gt; R</p>
<p>Returns: a set view of the mappings contained in this map</p>
<p><strong>Efficient code accessing the HashMap</strong></p>
<p>Which is better？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line">Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;Character, Integer&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">char</span> cur: s1.toCharArray()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (map.containsKey(cur)) &#123;</span><br><span class="line">        map.put(cur, map.get(cur) + <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        map.put(cur, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;Character, Integer&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">char</span> cur: s1.toCharArray()) &#123;</span><br><span class="line">    Integer count = map.get(cur);</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="keyword">null</span>) &#123;</span><br><span class="line">        count = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    map.put(cur, count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// or, in Java 8, use getOrDefault();</span></span><br></pre></td></tr></table></figure>
<p>2方法更好，1方法访问了3次，2方法访问了2次。</p>
<p>Which is better?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1 </span></span><br><span class="line">Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">char</span> cur: s.toCharArray()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!set.contains(cur)) &#123;</span><br><span class="line">        System.out.println(<span class="string">"adding new char to the set"</span>);</span><br><span class="line">        set.add(cur);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">Set&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">char</span> cur: s.toCharArray()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (set.add(cur)) &#123;</span><br><span class="line">        System.out.println(<span class="string">"adding new char to the set"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2更好，set.add(cur) 同时可以返回信息</p>
<p>How to iterate each of the key, value pairs in a HashMap?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, Interger&gt; map = <span class="keyword">new</span> HashMap&lt;String, Interger&gt;();</span><br><span class="line">map.put(<span class="string">"google"</span>, <span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">"yahoo"</span>, <span class="number">2</span>);</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>Which is better? A : 2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="keyword">for</span> (String key: map.keySet()) &#123;</span><br><span class="line">    System.out.println(key);</span><br><span class="line">    System.out.println(map.get(key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry: map.entrySet()) &#123;</span><br><span class="line">    System.out.println(entry.getKey());</span><br><span class="line">    Syetem.out.println(entry.getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Remove when traverse</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, Interger&gt; map = <span class="keyword">new</span> HashMap&lt;String, Interger&gt;();</span><br><span class="line">map.put(<span class="string">"google"</span>, <span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">"yahoo"</span>, <span class="number">2</span>);</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>Which is correct? A : 2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry: map.entrySet()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (entry.getValue() == <span class="number">0</span>) &#123;</span><br><span class="line">        map.remove(entry.getKey());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// throw ConcurrentModificationException();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iter = map.entrySet().iterator();</span><br><span class="line"><span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">    Map.Entry&lt;String, Integer&gt; cur = iter.next();</span><br><span class="line">    <span class="keyword">if</span> (cur.getValue() == <span class="number">0</span>) &#123;</span><br><span class="line">        iter.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>LinkedList -&gt; Tree in HashMap</p>
<p>Optimization -&gt; from Java 8 Search() operation</p>
<p>Balanced Binary Search Tree -&gt; O(logn)</p>
<ol type="1">
<li>if the LinkedList is very short, we do not do this optimization.</li>
<li>require order of the keys, but how?</li>
</ol>
<ol type="a">
<li>If the key does not implement Comparable, use a system hash function to decide the order.</li>
</ol>
<p><strong>Data Structures vs. Java Implementations</strong></p>
<p><strong>Data Structures</strong></p>
<ul>
<li>array new int[5];</li>
<li>array(sorted) -- search O(n) -&gt; O(logn)
<ul>
<li>O(1) random access(get by index)</li>
<li>limitation of array, fixed size or resizable.</li>
</ul></li>
<li>linked list
<ul>
<li>singly</li>
<li>doubly</li>
<li>O(n) random access(get by index)</li>
<li>O(1) append at head/tail</li>
</ul></li>
<li>queue
<ul>
<li>O(1) offer, poll, peek</li>
<li>FIFO</li>
<li>Circular Array</li>
</ul></li>
<li>stack
<ul>
<li>O(1) push, pop, top</li>
<li>LIFO</li>
</ul></li>
<li>deque
<ul>
<li>O(1) insert/remove/peek at both end</li>
</ul></li>
<li>heap
<ul>
<li>elements are ordered by their values</li>
<li>O(1) peek smallest/largest</li>
<li>O(logn) offer, poll</li>
</ul></li>
<li>hashtable
<ul>
<li>elements are not ordered</li>
<li>average O(1) search, insert, remove</li>
</ul></li>
<li>binary tree
<ul>
<li>O(n) search</li>
</ul></li>
<li>balanced binary search tree
<ul>
<li>elements are ordered</li>
<li>O(logn) search, insert, remove</li>
<li>O(logn) smallest/largest</li>
<li>O(logn) nextLarger(), nextSmaller()</li>
</ul></li>
</ul>
<p><strong>Java Implementation</strong></p>
<ul>
<li>array (int[] array, int[m] [n] matrix, ArrayList)</li>
<li>linked list</li>
<li>singly</li>
<li>doubly (LinkedList)</li>
<li>queue (LinkedList)</li>
<li>stack (LinkedList)</li>
<li>deque (LinkedList, ArrayDeque)</li>
<li>heap (PriorityQueue)</li>
<li>hashtable (HashMap, HashSet)</li>
<li>Balanced Binary Search Tree (TreeMap, TreeSet)</li>
<li>......</li>
</ul>
<p><strong>Extra Reading</strong></p>
<p><strong>Java Collection Framework</strong></p>
<ul>
<li>The most most frequently used classes and APls during practices/interviews.</li>
<li>The representation classes of <strong>data structures</strong>(called <strong>collections</strong>/containers).</li>
<li>Collections Framework is available from Java 5 (a set of the classes and interfaces conducting a hierarchical structure, following the strong OO paradigm, containing all the interfaces and implementations)</li>
<li>Official tutorial: https://docs.oracle.com/javase/tutorial/collections</li>
</ul>
<p><strong>Interfaces/Classes Hierarchy</strong></p>
<figure>
<img src="/2020/01/17/SDE实践/image-20200127142607895.png" alt="image-20200127142607895"><figcaption>image-20200127142607895</figcaption>
</figure>
<p><img src="/2020/01/17/SDE实践/image-20200127142646637.png" alt="image-20200127142646637"> The arrows means &quot;implements&quot;</p>
<p>Collection - Defines what operations should be provided for any classes that is a &quot;Collection&quot;. Any class that is a kind of collection should implement the defined method. http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html int size() boolean isEmpty() boolean add(E element) boolean contains(E element) boolean remove(E element) void clear()</p>
<p>List - Defines a group of data structures, that can contain duplicate elements, maintain the order of insertion of the elements and provide the capability of random access by using index. http://docs.oracle.com/javase/7/docs/api/java/util/List.html E get(int index) E remove(int index) E set(int index, E element)</p>
<p>ArrayList - A concrete implementation of List by resizable-array. http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html It is a List It is a Collection It implements all the methods specified in List and Collection. List<integer> list = new ArrayList<integer>(); ArrayList<integer> list = new ArrayList<integer>();</integer></integer></integer></integer></p>
<p>Queue - Defines a group of data structures, that is designated to 1). hold and buffer elements before processing 2). provide a way of choosing which element buffered is the next one to be processed 3). there are usually two ends of the Queue, and offer always at tail, poll() always at head. http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html boolean add(E element); E element(); E remove(); // group two operations boolean offer(E element); E peek(); E poll();</p>
<p>Deque - Defines a subtype of queue, where it is double ended. (FIFO &amp; LIFO are both provided) http://docs.oracle.com/javase/7/docs/api/java/uti/Deque.html boolean offerFirst(E element); boolean offerLast(E element); E pollFirst(); E pollLast(); E peekFirst(); E peekLast();</p>
<p>LinkedList - A List implementation that backed by a doubly linked list. It also can be used as queue/deque/stack. http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html It is a List lt is a Queue It is a Deque It is a Collection It implements all the methods specified in Collection, List, Queue, Deque.</p>
<p>PriorityQueue - Defines a special implementation of queue, where it is using priority to determine which element is the next to process(using order). http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html It implements all the methods specified in Collection, Queue.</p>
<p>Set - Defines a group of data structures, that contains no duplicate elements. http://docs.oracle.com/javase/7/docs/api/java/util/Set.html</p>
<p>HashSet - A concrete implementation of Set using hashtable. http://docs.oracle.com/javase/7/docs/api/java/uti/HashSet.html It is a Set It is a Collection It implements all the methods specified in Set and Collection.</p>
<p>SortedSet - Define a subtype of Set, that contains no duplicate elements, and the elements are sorted. It is a subtype of Set. http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html E first(); // smallest one E last(); // largest one SortedSet<e> headSet(E toElement); // all the elements smaller than toElement SortedSet<e> tailSet(E fromElement); // all the elements larger than fromElement ...</e></e></p>
<p>TreeSet - A concrete implementation of SortedSet using red-black tree. http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html It is a SortedSet It is a Set : It is a Collection It implements all the methods specified in SortedSet, Set and Collection.</p>
<p>Similar to Map, SortedMap, HashMap and TreeMap: http://docs.oracle.com/javase/7/docs/api/java/util/Map.html http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html</p>
<p><strong>About Arrays and Collections</strong></p>
<p>They are the placeholders of a set of utility methods for manipulating arrays and collections objects.</p>
<ul>
<li>They are NOT the class for array and Collection</li>
<li>All the methods in Arrays/Collections are static methods, so there is no need to create Arrays/Collections object to utilize them</li>
</ul>
<p>Arrays http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html</p>
<ul>
<li><p>Arrays.sort(int[] array) int[] array = new int[] {3, 2, 1}; Arrays.sort(array); // array = {1, 2, 3}</p></li>
<li><p>Arrays.sort(T[], Comparator<t> comparator) use the order defined in the comparator to sort the array.</t></p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Cell</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> x;</span><br><span class="line">    	<span class="keyword">int</span> y;</span><br><span class="line">    	<span class="keyword">int</span> value;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CellComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Cell</span>&gt; </span>&#123;</span><br><span class="line">    	<span class="meta">@Override</span></span><br><span class="line">    	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Cell c1, Cell c2)</span> </span>&#123;</span><br><span class="line">    		<span class="keyword">if</span> (c1.value == c2.value) &#123;</span><br><span class="line">    			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    		&#125;</span><br><span class="line">    		<span class="keyword">return</span> c1.value &lt; c2.value ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    Cell[] cells = ...;</span><br><span class="line">    Arrays.sort(cells, <span class="keyword">new</span> CellComparator());</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>Arrays.sort(int[] array); -&gt; quicksort Arrays.sort(Integer[] array); -&gt; optimized mergesort</p>
<p>quicksort - average fastest comparison based sorting algorithm average time O(nlogn), space O(logn) worst time O(n^2) space O(n) not stable</p>
<p>mergesort - guaranteed O(nlogn) time, O(n) space stable</p>
<p>heapsort - O(nlogn) time, O(1) space {1, 4, 3, 2, 5} Stable sort: the order of entries with equal keys will be preserved. Example: Sort student on score first, then gender. Two male student with score 90 and 80 will preserve their order after the sort on gender.</p>
<ul>
<li><p>Arrays.asList(T... a) - convert an array to a List Returns a fixed-size list backed by the specified array. (Changes to the returned list &quot;write through&quot; to the array.)</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = Arays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">//list is a List of [1, 2, 3] (Integer[])</span></span><br><span class="line"></span><br><span class="line">list.set(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">//list is [4, 2, 3]</span></span><br><span class="line"></span><br><span class="line">list.add(<span class="number">5</span>);</span><br><span class="line"><span class="comment">// throw UnsupportedOperationException - fixed-sized</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>Arrays.copyOf(original, int newLength)</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] copy = Arrays.copyOf(array, <span class="number">1</span>);</span><br><span class="line"><span class="comment">// copy = &#123;1&#125;</span></span><br><span class="line">copy = Arrays.copyOf(array, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// copy= &#123;1, 2, 3, 0, 0&#125;, padding default values at the end</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>Arrays.fill(original, value)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">Arrays.fill(array, <span class="number">1</span>);</span><br><span class="line"><span class="comment">// array = &#123;1, 1, 1&#125;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Arrays.toString(int[] array), Arrays.deepToString(int[] [] matrix)</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">String s = Arrays.toString(array);</span><br><span class="line"><span class="comment">// s = "[1, 2, 3]";</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[][] matrix = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">1</span>, <span class="number">2</span>&#125;&#125;;</span><br><span class="line">String t = Arrays.deepToString(matrix);</span><br><span class="line"><span class="comment">// t = "[[1, 2], [1, 2]]"</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>Arrays.binarySearch(original, value)</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] array = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">Arrays.sort(array);</span><br><span class="line"><span class="comment">// the array must be guaranteed to be sorted before using binarySearch</span></span><br><span class="line"><span class="keyword">int</span> i = Arrays.binarySearch(array, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// i = 1</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<p><strong>Collections</strong></p>
<p>http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html</p>
<ul>
<li>Collections.sort(List<t> list), Collections.sort(List<t> list, Comparator<t> comparator)</t></t></t></li>
<li>Collections.binarySearch(List<t> list)</t></li>
<li>Collections.swap(List<t> list, int i, int j)</t></li>
<li>Collections.fill(List<t> list, T value)</t></li>
<li>Collections.reverse(List list)</li>
<li>Collections.reverseOrder() : reverse the natural order defined by a class implementing Comparable interface</li>
</ul>
<p>// You can use Collections.reverseOrder() this way. PriorityQueue<integer> maxHeap = new PriorityQueue<integer>(11, Collections.reverseOrder());</integer></integer></p>
<p>Convert List to array(or, Collection to array)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Collection</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">	Object[] toArray()</span><br><span class="line">    T[] toArray(T[] array)</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">List</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Collection</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">Integer[] array = list.toArray(<span class="keyword">new</span> Integer[list.size()]);</span><br></pre></td></tr></table></figure>
<p>in Java - The elements in the generic Collection can not be primitive type. There is no List<int>, List<long> ... etc.</long></int></p>
<p>List<integer> to int[] array ?</integer></p>
<p>There is no existing utility / method in Java plain API, in another way, you have to write your own method to do this.</p>
<h2 id="bit-representation">Bit Representation</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bit</span> </span>&#123;</span><br><span class="line">    <span class="comment">// print binary representation of a int value.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printBinary</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        System.out.println(value + <span class="string">":"</span>);</span><br><span class="line">        StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> shift = <span class="number">31</span>; shift &gt;= <span class="number">0</span>; shift--) &#123;</span><br><span class="line">            builder.append((value &gt;&gt;&gt; shift) &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(builder.toString());</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 0</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">        Bit.printBinary(a);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// positive number</span></span><br><span class="line">        a = <span class="number">5</span>;</span><br><span class="line">        Bit.printBinary(a);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// negative number</span></span><br><span class="line">        a = -<span class="number">5</span>;</span><br><span class="line">        Bit.printBinary(a);</span><br><span class="line"></span><br><span class="line">        a = Integer.MIN_VALUE;</span><br><span class="line">        Bit.printBinary(a);</span><br><span class="line"></span><br><span class="line">        a = Integer.MAX_VALUE;</span><br><span class="line">        Bit.printBinary(a);</span><br><span class="line"></span><br><span class="line">        a = -<span class="number">1</span>;</span><br><span class="line">        Bit.printBinary(a);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// signed shift - leftmost bit depends on previous leftmost bit</span></span><br><span class="line">        <span class="keyword">int</span> b = a &gt;&gt; <span class="number">5</span>;</span><br><span class="line">        Bit.printBinary(b);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// unsigned shift - leftmost bit "0"</span></span><br><span class="line">        b = a &gt;&gt;&gt; <span class="number">5</span>;</span><br><span class="line">        Bit.printBinary(b);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>&quot;&gt;&gt;&gt;&quot; vs. &quot;&gt;&gt;&quot;</p>
<ul>
<li><p>signed shift &quot;&gt;&gt;&quot; - arithmetical</p>
<p>The leftmost position after signed shift depends on sign extension(the most significant bit) <img src="/2020/01/17/SDE实践/image-20200127203814010.png" alt="image-20200127203814010"></p></li>
</ul></li>
<li><p>unsigned shift &quot;&gt;&gt;&gt;&quot; - logical</p>
<pre><code>  The signed right shift operator &quot;&gt;&gt;&gt;&quot; shifts a zero into the leftmost position
  ![image-20200127204304752](SDE实践/image-20200127204304752.png)</code></pre></li>
</ul>
<p>Note: There is no &quot;unsigned int&quot; in Java, but there is unsigned right shift.</p>
<p>two view of int:</p>
<ul>
<li>32 bits, each of which is either 0 or 1</li>
<li>arithmetic number http://stackoverflow.com/questions/1023373/findbugs-warning-integer-shift-by-32-what-does-it-mean</li>
</ul>
<p><strong>Autoboxing and Unboxing</strong></p>
<ul>
<li>Primitive type vs. Wrapper class
<ul>
<li>int: Integer</li>
<li>long: Long</li>
<li>char: Character</li>
<li>double: Double</li>
<li>boolean: Boolean</li>
<li>......</li>
</ul></li>
</ul>
<p>A wrapper class is just a wrapper of the corresponding primitive type, the Object representation of primitive type values. <strong>Similar to String, all the wrapper class objects are IMMUTABLE - internal values can not be changed after initialization.</strong> It can help:</p>
<ol type="1">
<li>Generic type can not be primitive type, List <integer>; there can not be List<int></int></integer></li>
<li>It can help provide useful functionalities and contracts (json serializer: obj -&gt; json)</li>
<li>How do you represent a &quot;not existed&quot; int value? &quot;null&quot;</li>
</ol>
<p>Prefer primitive types to wrapper classes.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// example:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Integer</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> value; <span class="comment">// wrap the primitive type value inside.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Integer</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">intValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">plus</span><span class="params">(Integer another)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.valueOf(value + another.intValue());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Integer another)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (value == another.value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> value &lt; another ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>autoboxing</strong> Autoboxing is the automatic conversion that the Java compiler makes between the primitive types and their corresponding object wrapper classes.</p>
<p>For example, converting an int to an Integer, a double to a Double, and so on.</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; integerList = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">    integerList.add(i); <span class="comment">// ==&gt; integerList.add(Integer.valueOf(i));</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p><strong>unboxing</strong> Unboxing is the reverse operation of autoboxing.</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer a = <span class="number">4</span>; <span class="comment">// autoboxing =&gt; Integer a = Integer.valueOf(4);</span></span><br><span class="line">a += <span class="number">4</span>;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>What happened when Integer++?</p>
<ul>
<li><p>Integer is immutable, the int value of the Integer object can never change</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a++:</span></span><br><span class="line"><span class="keyword">int</span> temp = a.intValue();</span><br><span class="line">temp++;</span><br><span class="line">a = Integer.valueOf(temp); <span class="comment">// a is pointing to another Integer object.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// a += 4;</span></span><br><span class="line"><span class="keyword">int</span> temp = a.intValue();</span><br><span class="line">temp += <span class="number">4</span>;</span><br><span class="line">a = Integer.valueOf(temp); <span class="comment">// a is pointing to another Integer object.</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>More Examples:</p>
<p>+, -, *, /, &gt;, &lt;, &gt;=, &lt;= ... only applied to primitive type.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Integer a = <span class="number">1115</span>; <span class="comment">// autoboxing</span></span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">5</span>; <span class="comment">// primitive</span></span><br><span class="line">        System.out.println(a &gt; b); <span class="comment">// unboxing. =&gt; a.intValue() &gt; b false</span></span><br><span class="line">        System.out.println(a + <span class="number">2</span>);</span><br><span class="line">        System.out.println(a * <span class="number">3</span>);</span><br><span class="line">        System.out.println(a == b); <span class="comment">// unboxing, true</span></span><br><span class="line">        Integer c = <span class="number">1115</span>;</span><br><span class="line">        System.out.println(a &gt; c); <span class="comment">// unboxing =&gt; a.intValue() &gt; c.intValue() false</span></span><br><span class="line">        System.out.println(a &gt;= c); <span class="comment">// unboxing =&gt; a.intValue() &gt; c.intValue() true</span></span><br><span class="line">        System.out.println(a == c); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// == both operand can be Object type and it is comparing if the two references are pointed to the same Object.</span></span><br><span class="line"></span><br><span class="line">        a = <span class="number">129</span>; <span class="comment">// Integer.valueOf(129);</span></span><br><span class="line">        c = <span class="number">129</span>; <span class="comment">// Integer.valueOf(129);</span></span><br><span class="line">        System.out.println(a &gt; c); <span class="comment">// false</span></span><br><span class="line">        System.out.println(a &gt;= c); <span class="comment">// true</span></span><br><span class="line">        System.out.println(a == c); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Integer class cache the Integer object with value from -128 to 127, so every time an Integer object within this range is needed, it will always return the corresponding object.</li>
<li>The unboxing is done only when it is necessary, for example, a &gt; b. Be very careful about using &quot;==&quot;</li>
</ul>
<p><strong>int[] vs. Integer[]</strong> They are totally different types, and there is no auto conversion directly between them. Integer[] objArray = new Integer[5]; int[] array = objArray; // compile error. But, Integer[] objArray = new Integer[5]; objArray[0] = 1; // will work. int[] array = new int[5]; Integer a = 5; array[0] = a; // will work.</p>
<p>When you implement your own Comparator or override equals(), keep in mind:</p>
<ul>
<li>be very careful if you see &quot;==&quot; on Object type.</li>
</ul>
<p>Bad:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer i1, Integer i2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i1 == i2) &#123; <span class="comment">// we do not want to check the references.</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i1 &lt; i2 ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 alternative ways:</p>
<ol type="1">
<li>return i1.compareTo(i2);</li>
<li>if (i1.equals(i2)) {}</li>
<li>if (i1.intValue() == i2.intValue()) {}</li>
</ol>
<p>Bad: It could overflow.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer i1, Integer i2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> i1 - i2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Good:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer i1, Integer i2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i1 &lt; i2) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i1 &gt; i2) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Long i1, Long i2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i1 &lt; i2) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i1 &gt; i2) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="string">String</h2>
<ul>
<li><p>a sequence of characters &quot;abc&quot;</p></li>
<li><p>in Java, they are objects</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span>[] value;</span><br><span class="line">    <span class="comment">// different String objects can reuse the same char array,</span></span><br><span class="line">    <span class="comment">// but can start with different offset index.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> offset;</span><br><span class="line">    <span class="comment">// maintains the length of the part in the char array</span></span><br><span class="line">    <span class="comment">// represented by this String object.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        value = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">0</span>];</span><br><span class="line">        offset = <span class="number">0</span>;</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span>[] array = &#123;<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>&#125;;</span><br><span class="line">offset = <span class="number">1</span>; count = <span class="number">2</span>; <span class="comment">// array(1, 2); "bc";</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>creating Strings</p>
<ul>
<li>String literal:
<ul>
<li>a series of characters in your code that is enclosed in double quotes &quot;abc&quot;</li>
</ul></li>
<li><p>Whenever it encounters a string literal in your code, the compiler creates a String Object with its value(really?) String s1 = &quot;abc&quot;; String s2 = &quot;abc&quot;; System.out.println(s1 == s2); // true</p></li>
<li><p><strong>Pooling for String objects</strong> There is no need for maintaining several copies of String objects with the same literal, since String objects are immutable. Usually compiler and JVM will optimize for the number of String objects created, it will maintain an intern area in HEAP, for the same String literal it will only has one String object associated.</p></li>
<li><p>String s1 = &quot;abc&quot;; String s2 = new String(&quot;abc&quot;); // String(String another)</p></li>
<li><p>// how many Strings are created? System.out.println(s1 == s2); // false System.out.println(s1.equals(s2)); // true The String objects created with &quot;new&quot; will not use the intern pool;</p></li>
<li><p>Another Example: String sa = &quot;a&quot;; String sb = &quot;b&quot;; String sab = &quot;a&quot; + &quot;b&quot;; // compile time concat, &quot;ab&quot; // &lt;=&gt; String sab = &quot;ab&quot;;</p></li>
<li><p>System.out.println(sab == &quot;a&quot; + &quot;b&quot;); // true System.out.println(sab == sa + &quot;b&quot;); // false, sa.concat(&quot;b&quot;); System.out.println(sab == sa + sb); // false, sa.concat(sb);</p></li>
<li><p>The optimization is at compile time, the literals will be concatenated if possible before getting the String object.</p></li>
<li><p>Question: how many String objects are created?</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">    String s = <span class="keyword">new</span> String(<span class="string">"abc"</span>); <span class="comment">// new String(String another)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">    String temp = <span class="string">"abc"</span>;</span><br><span class="line">    String s = <span class="keyword">new</span> String(temp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>100: if &quot;abc&quot; is in the pool 101: if &quot;abc&quot; is not in the pool</p></li>
<li><p>Constructors - http://oracle.com/javase/7/docs/api/java/lang/String.html String() String(String value) String(char[] array) String(char[] array, int offset, int length) String(StringBuilder builder)</p></li>
</ul></li>
<li><p>Immutable</p>
<ul>
<li><p>the value of the String object cannot be changed after creation.</p>
<p>String s1 = &quot;abc&quot;; String s2 = s1; <img src="/2020/01/17/SDE实践/image-20200127223229974.png" alt="image-20200127223229974"> // this is another String object, the previous object's value is not changed. s2 = &quot;def&quot; <img src="/2020/01/17/SDE实践/image-20200127223546788.png" alt="image-20200127223546788"> System.out.println(s1); // &quot;abc&quot; System.out.println(s2); // &quot;def&quot;</p></li>
</ul></li>
<li><p>String length</p>
<ul>
<li>s1.length() vs. int[] length;</li>
</ul></li>
<li><p>Concatenate Strings</p>
<ul>
<li>s1.concat(s2) // again, this will create a new String object rather than change the value of s1 or s2.</li>
<li>s1 = &quot;abc&quot; + &quot;def&quot;; // 等价于s1 = &quot;abcdef&quot;, compile time concatenation.</li>
<li>s1 = s1 + &quot;def&quot;; // &lt;==&gt; s1.concat(&quot;def&quot;);</li>
<li>s1 = 1 + &quot;def&quot;; // String.valueOf(1), (1 -&gt; Integer(1) -&gt; Integer(1).toString()) -&gt; &quot;1&quot;</li>
<li>s1 = &quot;id: &quot; + 2 + &quot;isStudent: &quot; + true + 'y';</li>
</ul></li>
</ul>
<h2 id="interface-abstract-class-access-modifier-exceptions">Interface, Abstract Class, Access Modifier, Exceptions</h2>
<p><strong>Inheritance</strong></p>
<p>Definitions: A class that is derived from another class is called a subclass (also a derived class, extended class, or child class). The class from which the subclass is derived is called a superclass(also a base class or a parent class).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String company;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCompany</span><span class="params">(String company)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.company = company;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCompany</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> company; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Employee e = <span class="keyword">new</span> Employee();</span><br><span class="line">        e.setCompany(<span class="string">"google"</span>);</span><br><span class="line">        e.setName(<span class="string">"elon"</span>);</span><br><span class="line">        String name = e.getName(); <span class="comment">// 依旧可以调用</span></span><br><span class="line">        String company = e.getCompany();</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        System.out.println(company);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Override vs. Overload</strong></p>
<p>Override is when you redefine a method that has been defined in a parent class (using the same signature). Resolved at runtime.</p>
<p>Overload is when you define two methods with the same name, in the same class, distinguished by their signatures (different), Resolved at compile time.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">(D obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">"A and D"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">(A obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">"A and A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">(B obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">"B and B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">show</span><span class="params">(A obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">"B and A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A a1 = <span class="keyword">new</span> A();</span><br><span class="line">        A a2 = <span class="keyword">new</span> B();</span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">        C c = <span class="keyword">new</span> C();</span><br><span class="line">        D d = <span class="keyword">new</span> D();</span><br><span class="line">        System.out.println(<span class="string">"1--"</span> + a1.show(b));</span><br><span class="line">        System.out.println(<span class="string">"2--"</span> + a1.show(c));</span><br><span class="line">        System.out.println(<span class="string">"3--"</span> + a1.show(d));</span><br><span class="line">        System.out.println(<span class="string">"4--"</span> + a2.show(b));</span><br><span class="line">        System.out.println(<span class="string">"5--"</span> + a2.show(c));</span><br><span class="line">        System.out.println(<span class="string">"6--"</span> + a2.show(d));</span><br><span class="line">        System.out.println(<span class="string">"7--"</span> + b.show(b));</span><br><span class="line">        System.out.println(<span class="string">"8--"</span> + b.show(c));</span><br><span class="line">        System.out.println(<span class="string">"9--"</span> + b.show(d));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1--A and A</span></span><br><span class="line"><span class="comment">2--A and A</span></span><br><span class="line"><span class="comment">3--A and D</span></span><br><span class="line"><span class="comment">4--B and A</span></span><br><span class="line"><span class="comment">5--B and A</span></span><br><span class="line"><span class="comment">6--A and D</span></span><br><span class="line"><span class="comment">7--B and B</span></span><br><span class="line"><span class="comment">8--B and B</span></span><br><span class="line"><span class="comment">9--A and D</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

      
    </div>

    

    
    
    

    

    
      
    
    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>捧个钱场？</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById(&quot;QR&quot;); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Lucas Chan 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Lucas Chan 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        




  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Lucas Chan</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    
    <a href="http://hackcraker.github.io/2020/01/17/SDE实践/" title="SDE实践">http://hackcraker.github.io/2020/01/17/SDE实践/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/01/14/正则表达式/" rel="next" title="正则表达式">
                <i class="fa fa-chevron-left"></i> 正则表达式
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/01/29/SDE实践1/" rel="prev" title="SDE实践1">
                SDE实践1 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/morty.png" alt="Lucas Chan">
            
              <p class="site-author-name" itemprop="name">Lucas Chan</p>
              <p class="site-description motion-element" itemprop="description">满地都是六便士,他却抬头看到了月亮。</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">32</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/hackcraker" title="GitHub &rarr; https://github.com/hackcraker" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://instagram.com/hackcraker" title="Instagram &rarr; https://instagram.com/hackcraker" rel="noopener" target="_blank"><i class="fa fa-fw fa-instagram"></i>Instagram</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.douban.com/people/hackcraker" title="豆瓣 &rarr; https://www.douban.com/people/hackcraker" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>豆瓣</a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#list"><span class="nav-text">List</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arraylist"><span class="nav-text">ArrayList</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linkedlist"><span class="nav-text">LinkedList</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#queue-stack-deque"><span class="nav-text">Queue &amp; Stack &amp; Deque</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#priorityqueue"><span class="nav-text">PriorityQueue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#heap"><span class="nav-text">Heap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tree"><span class="nav-text">Tree</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#map-set-hash"><span class="nav-text">Map &amp; Set &amp; Hash</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hashmap-implementation-arrays-collections"><span class="nav-text">HashMap Implementation, Arrays, Collections</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bit-representation"><span class="nav-text">Bit Representation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string"><span class="nav-text">String</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#interface-abstract-class-access-modifier-exceptions"><span class="nav-text">Interface, Abstract Class, Access Modifier, Exceptions</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">  <a href="http://www.miitbeian.gov.cn" rel="noopener" target="_blank">京ICP备 - 1321131714 </a>&copy; 2018 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lucas Chan</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">258k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">3:54</span>
  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.1"></script>




  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/bootstrap.js?v=7.0.1"></script>


  
  
  

<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'L5gR7yTYP8X0caW0Hie6bbev-gzGzoHsz',
    appKey: 'nWnbI4oH07bE20wyQ8mq9zVO',
    placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊!',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false
  });
</script>




  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->





  

  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  

</body>
</html>
